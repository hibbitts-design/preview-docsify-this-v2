/*!
 * Docsify Plugin: search v4.13.0
 * https://docsify.js.org
 * (c) 2017-2024
 * MIT license
 */
!function(){"use strict";function e(){let e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/<!-- {docsify-ignore} -->/g.test(t)&&(t=t.replace("\x3c!-- {docsify-ignore} --\x3e",""),n=!0),/{docsify-ignore}/g.test(t)&&(t=t.replace("{docsify-ignore}",""),n=!0),/<!-- {docsify-ignore-all} -->/g.test(t)&&(t=t.replace("\x3c!-- {docsify-ignore-all} --\x3e",""),e=!0),/{docsify-ignore-all}/g.test(t)&&(t=t.replace("{docsify-ignore-all}",""),e=!0),{content:t,ignoreAllSubs:e,ignoreSubHeading:n}}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r={exports:{}};r.exports=function(){
/*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** */
var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};function t(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var r=function(){return r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},r.apply(this,arguments)};function i(e,n,t){for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n,a=Object.keys,u=Array.isArray;function s(e,n){return"object"!=typeof n||a(n).forEach((function(t){e[t]=n[t]})),e}"undefined"==typeof Promise||o.Promise||(o.Promise=Promise);var c=Object.getPrototypeOf,l={}.hasOwnProperty;function f(e,n){return l.call(e,n)}function h(e,n){"function"==typeof n&&(n=n(c(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(n).forEach((function(t){p(e,t,n[t])}))}var d=Object.defineProperty;function p(e,n,t,r){d(e,n,s(t&&f(t,"get")&&"function"==typeof t.get?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function y(e){return{from:function(n){return e.prototype=Object.create(n.prototype),p(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var v=Object.getOwnPropertyDescriptor;function m(e,n){var t;return v(e,n)||(t=c(e))&&m(t,n)}var b=[].slice;function g(e,n,t){return b.call(e,n,t)}function w(e,n){return n(e)}function _(e){if(!e)throw new Error("Assertion Failed")}function x(e){o.setImmediate?setImmediate(e):setTimeout(e,0)}function k(e,n){return e.reduce((function(e,t,r){var i=n(t,r);return i&&(e[i[0]]=i[1]),e}),{})}function O(e,n){if("string"==typeof n&&f(e,n))return e[n];if(!n)return e;if("string"!=typeof n){for(var t=[],r=0,i=n.length;r<i;++r){var o=O(e,n[r]);t.push(o)}return t}var a=n.indexOf(".");if(-1!==a){var u=e[n.substr(0,a)];return null==u?void 0:O(u,n.substr(a+1))}}function P(e,n,t){if(e&&void 0!==n&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof n&&"length"in n){_("string"!=typeof t&&"length"in t);for(var r=0,i=n.length;r<i;++r)P(e,n[r],t[r])}else{var o=n.indexOf(".");if(-1!==o){var a=n.substr(0,o),s=n.substr(o+1);if(""===s)void 0===t?u(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=t;else{var c=e[a];c&&f(e,a)||(c=e[a]={}),P(c,s,t)}}else void 0===t?u(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=t}}function E(e,n){"string"==typeof n?P(e,n,void 0):"length"in n&&[].map.call(n,(function(n){P(e,n,void 0)}))}function K(e){var n={};for(var t in e)f(e,t)&&(n[t]=e[t]);return n}var A=[].concat;function S(e){return A.apply([],e)}var D="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(n){return n+e+"Array"}))})))).filter((function(e){return o[e]})),j=new Set(D.map((function(e){return o[e]})));function C(e){var n={};for(var t in e)if(f(e,t)){var r=e[t];n[t]=!r||"object"!=typeof r||j.has(r.constructor)?r:C(r)}return n}function T(e){for(var n in e)if(f(e,n))return!1;return!0}var q=null;function B(e){q=new WeakMap;var n=I(e);return q=null,n}function I(e){if(!e||"object"!=typeof e)return e;var n=q.get(e);if(n)return n;if(u(e)){n=[],q.set(e,n);for(var t=0,r=e.length;t<r;++t)n.push(I(e[t]))}else if(j.has(e.constructor))n=e;else{var i=c(e);for(var o in n=i===Object.prototype?{}:Object.create(i),q.set(e,n),e)f(e,o)&&(n[o]=I(e[o]))}return n}var R={}.toString;function N(e){return R.call(e).slice(8,-1)}var M="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",F="symbol"==typeof M?function(e){var n;return null!=e&&(n=e[M])&&n.apply(e)}:function(){return null};function L(e,n){var t=e.indexOf(n);return t>=0&&e.splice(t,1),t>=0}var $={};function z(e){var n,t,r,i;if(1===arguments.length){if(u(e))return e.slice();if(this===$&&"string"==typeof e)return[e];if(i=F(e)){for(t=[];!(r=i.next()).done;)t.push(r.value);return t}if(null==e)return[e];if("number"==typeof(n=e.length)){for(t=new Array(n);n--;)t[n]=e[n];return t}return[e]}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}var U="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},V=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Y=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(V),W={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function H(e,n){this.name=e,this.message=n}function X(e,n){return e+". Errors: "+Object.keys(n).map((function(e){return n[e].toString()})).filter((function(e,n,t){return t.indexOf(e)===n})).join("\n")}function Q(e,n,t,r){this.failures=n,this.failedKeys=r,this.successCount=t,this.message=X(e,n)}function G(e,n){this.name="BulkError",this.failures=Object.keys(n).map((function(e){return n[e]})),this.failuresByPos=n,this.message=X(e,this.failures)}y(H).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(Q).from(H),y(G).from(H);var J=Y.reduce((function(e,n){return e[n]=n+"Error",e}),{}),Z=H,ee=Y.reduce((function(e,n){var t=n+"Error";function r(e,r){this.name=t,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=W[n]||t,this.inner=null)}return y(r).from(Z),e[n]=r,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var ne=V.reduce((function(e,n){return e[n+"Error"]=ee[n],e}),{});function te(e,n){if(!e||e instanceof H||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ne[e.name])return e;var t=new ne[e.name](n||e.message,e);return"stack"in e&&p(t,"stack",{get:function(){return this.inner.stack}}),t}var re=Y.reduce((function(e,n){return-1===["Syntax","Type","Range"].indexOf(n)&&(e[n+"Error"]=ee[n]),e}),{});function ie(){}function oe(e){return e}function ae(e,n){return null==e||e===oe?n:function(t){return n(e(t))}}function ue(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function se(e,n){return e===ie?n:function(){var t=e.apply(this,arguments);void 0!==t&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=n.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ue(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ue(i,this.onerror):i),void 0!==o?o:t}}function ce(e,n){return e===ie?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?ue(t,this.onsuccess):t),r&&(this.onerror=this.onerror?ue(r,this.onerror):r)}}function le(e,n){return e===ie?n:function(t){var r=e.apply(this,arguments);s(t,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=n.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ue(i,this.onsuccess):i),o&&(this.onerror=this.onerror?ue(o,this.onerror):o),void 0===r?void 0===a?void 0:a:s(r,a)}}function fe(e,n){return e===ie?n:function(){return!1!==n.apply(this,arguments)&&e.apply(this,arguments)}}function he(e,n){return e===ie?n:function(){var t=e.apply(this,arguments);if(t&&"function"==typeof t.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return t.then((function(){return n.apply(r,o)}))}return n.apply(this,arguments)}}re.ModifyError=Q,re.DexieError=H,re.BulkError=G;var de="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function pe(e,n){de=e}var ye={},ve=100,me="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,c(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,c(n),e]}(),be=me[0],ge=me[1],we=me[2],_e=ge&&ge.then,xe=be&&be.constructor,ke=!!we;function Oe(){queueMicrotask(Ue)}var Pe=function(e,n){Te.push([e,n]),Ke&&(Oe(),Ke=!1)},Ee=!0,Ke=!0,Ae=[],Se=[],De=oe,je={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ie,pgp:!1,env:{},finalize:ie},Ce=je,Te=[],qe=0,Be=[];function Ie(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=Ce;if("function"!=typeof e){if(e!==ye)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Fe(this,this._value))}this._state=null,this._value=null,++n.ref,Me(this,e)}var Re={get:function(){var e=Ce,n=rn;function t(t,r){var i=this,o=!e.global&&(e!==Ce||n!==rn),a=o&&!sn(),u=new Ie((function(n,u){$e(i,new Ne(yn(t,e,o,a),yn(r,e,o,a),n,u,e))}));return this._consoleTask&&(u._consoleTask=this._consoleTask),u}return t.prototype=ye,t},set:function(e){p(this,"then",e&&e.prototype===ye?Re:{get:function(){return e},set:Re.set})}};function Ne(e,n,t,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=t,this.reject=r,this.psd=i}function Me(e,n){try{n((function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var t=e._lib&&Ve();n&&"function"==typeof n.then?Me(e,(function(e,t){n instanceof Ie?n._then(e,t):n.then(e,t)})):(e._state=!0,e._value=n,Le(e)),t&&Ye()}}),Fe.bind(null,e))}catch(n){Fe(e,n)}}function Fe(e,n){if(Se.push(n),null===e._state){var t=e._lib&&Ve();n=De(n),e._state=!1,e._value=n,Xe(e),Le(e),t&&Ye()}}function Le(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t<r;++t)$e(e,n[t]);var i=e._PSD;--i.ref||i.finalize(),0===qe&&(++qe,Pe((function(){0==--qe&&We()}),[]))}function $e(e,n){if(null!==e._state){var t=e._state?n.onFulfilled:n.onRejected;if(null===t)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++qe,Pe(ze,[t,e,n])}else e._listeners.push(n)}function ze(e,n,t){try{var r,i=n._value;!n._state&&Se.length&&(Se=[]),r=de&&n._consoleTask?n._consoleTask.run((function(){return e(i)})):e(i),n._state||-1!==Se.indexOf(i)||Qe(n),t.resolve(r)}catch(e){t.reject(e)}finally{0==--qe&&We(),--t.psd.ref||t.psd.finalize()}}function Ue(){pn(je,(function(){Ve()&&Ye()}))}function Ve(){var e=Ee;return Ee=!1,Ke=!1,e}function Ye(){var e,n,t;do{for(;Te.length>0;)for(e=Te,Te=[],t=e.length,n=0;n<t;++n){var r=e[n];r[0].apply(null,r[1])}}while(Te.length>0);Ee=!0,Ke=!0}function We(){var e=Ae;Ae=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var n=Be.slice(0),t=n.length;t;)n[--t]()}function He(e){function n(){e(),Be.splice(Be.indexOf(n),1)}Be.push(n),++qe,Pe((function(){0==--qe&&We()}),[])}function Xe(e){Ae.some((function(n){return n._value===e._value}))||Ae.push(e)}function Qe(e){for(var n=Ae.length;n;)if(Ae[--n]._value===e._value)return void Ae.splice(n,1)}function Ge(e){return new Ie(ye,!1,e)}function Je(e,n){var t=Ce;return function(){var r=Ve(),i=Ce;try{return hn(t,!0),e.apply(this,arguments)}catch(e){n&&n(e)}finally{hn(i,!1),r&&Ye()}}}h(Ie.prototype,{then:Re,_then:function(e,n){$e(this,new Ne(null,null,e,n,Ce))},catch:function(e){if(1===arguments.length)return this.then(null,e);var n=arguments[0],t=arguments[1];return"function"==typeof n?this.then(null,(function(e){return e instanceof n?t(e):Ge(e)})):this.then(null,(function(e){return e&&e.name===n?t(e):Ge(e)}))},finally:function(e){return this.then((function(n){return Ie.resolve(e()).then((function(){return n}))}),(function(n){return Ie.resolve(e()).then((function(){return Ge(n)}))}))},timeout:function(e,n){var t=this;return e<1/0?new Ie((function(r,i){var o=setTimeout((function(){return i(new ee.Timeout(n))}),e);t.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(Ie.prototype,Symbol.toStringTag,"Dexie.Promise"),je.env=dn(),h(Ie,{all:function(){var e=z.apply(null,arguments).map(cn);return new Ie((function(n,t){0===e.length&&n([]);var r=e.length;e.forEach((function(i,o){return Ie.resolve(i).then((function(t){e[o]=t,--r||n(e)}),t)}))}))},resolve:function(e){return e instanceof Ie?e:e&&"function"==typeof e.then?new Ie((function(n,t){e.then(n,t)})):new Ie(ye,!0,e)},reject:Ge,race:function(){var e=z.apply(null,arguments).map(cn);return new Ie((function(n,t){e.map((function(e){return Ie.resolve(e).then(n,t)}))}))},PSD:{get:function(){return Ce},set:function(e){return Ce=e}},totalEchoes:{get:function(){return rn}},newPSD:an,usePSD:pn,scheduler:{get:function(){return Pe},set:function(e){Pe=e}},rejectionMapper:{get:function(){return De},set:function(e){De=e}},follow:function(e,n){return new Ie((function(t,r){return an((function(n,t){var r=Ce;r.unhandleds=[],r.onunhandled=t,r.finalize=ue((function(){var e=this;He((function(){0===e.unhandleds.length?n():t(e.unhandleds[0])}))}),r.finalize),e()}),n,t,r)}))}}),xe&&(xe.allSettled&&p(Ie,"allSettled",(function(){var e=z.apply(null,arguments).map(cn);return new Ie((function(n){0===e.length&&n([]);var t=e.length,r=new Array(t);e.forEach((function(e,i){return Ie.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--t||n(r)}))}))}))})),xe.any&&"undefined"!=typeof AggregateError&&p(Ie,"any",(function(){var e=z.apply(null,arguments).map(cn);return new Ie((function(n,t){0===e.length&&t(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Ie.resolve(e).then((function(e){return n(e)}),(function(e){i[o]=e,--r||t(new AggregateError(i))}))}))}))})));var Ze={awaits:0,echoes:0,id:0},en=0,nn=[],tn=0,rn=0,on=0;function an(e,n,t,r){var i=Ce,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++on,je.env,o.env=ke?{Promise:Ie,PromiseProp:{value:Ie,configurable:!0,writable:!0},all:Ie.all,race:Ie.race,allSettled:Ie.allSettled,any:Ie.any,resolve:Ie.resolve,reject:Ie.reject}:{},n&&s(o,n),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=pn(o,e,t,r);return 0===o.ref&&o.finalize(),a}function un(){return Ze.id||(Ze.id=++en),++Ze.awaits,Ze.echoes+=ve,Ze.id}function sn(){return!!Ze.awaits&&(0==--Ze.awaits&&(Ze.id=0),Ze.echoes=Ze.awaits*ve,!0)}function cn(e){return Ze.echoes&&e&&e.constructor===xe?(un(),e.then((function(e){return sn(),e}),(function(e){return sn(),mn(e)}))):e}function ln(e){++rn,Ze.echoes&&0!=--Ze.echoes||(Ze.echoes=Ze.awaits=Ze.id=0),nn.push(Ce),hn(e,!0)}function fn(){var e=nn[nn.length-1];nn.pop(),hn(e,!1)}function hn(e,n){var t=Ce;if((n?!Ze.echoes||tn++&&e===Ce:!tn||--tn&&e===Ce)||queueMicrotask(n?ln.bind(null,e):fn),e!==Ce&&(Ce=e,t===je&&(je.env=dn()),ke)){var r=je.env.Promise,i=e.env;(t.global||e.global)&&(Object.defineProperty(o,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function dn(){var e=o.Promise;return ke?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function pn(e,n,t,r,i){var o=Ce;try{return hn(e,!0),n(t,r,i)}finally{hn(o,!1)}}function yn(e,n,t,r){return"function"!=typeof e?e:function(){var i=Ce;t&&un(),hn(n,!0);try{return e.apply(this,arguments)}finally{hn(i,!1),r&&queueMicrotask(sn)}}}function vn(e){Promise===xe&&0===Ze.echoes?0===tn?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+_e).indexOf("[native code]")&&(un=sn=ie);var mn=Ie.reject;function bn(e,n,t,r){if(e.idbdb&&(e._state.openComplete||Ce.letThrough||e._vip)){var i=e._createTransaction(n,t,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return bn(e,n,t,r)}))):mn(i)}return i._promise(n,(function(e,n){return an((function(){return Ce.trans=i,r(e,n,i)}))})).then((function(e){if("readwrite"===n)try{i.idbtrans.commit()}catch(e){}return"readonly"===n?e:i._completion.then((function(){return e}))}))}if(e._state.openComplete)return mn(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return mn(new ee.DatabaseClosed);e.open().catch(ie)}return e._state.dbReadyPromise.then((function(){return bn(e,n,t,r)}))}var gn="4.0.8",wn=String.fromCharCode(65535),_n=-1/0,xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",kn="String expected.",On=[],Pn="__dbnames",En="readonly",Kn="readwrite";function An(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var Sn={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Dn(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(n){return void 0===n[e]&&e in n&&delete(n=B(n))[e],n}}function jn(){throw ee.Type()}function Cn(e,n){try{var t=Bn(e),r=Bn(n);if(t!==r)return"Array"===t?1:"Array"===r?-1:"binary"===t?1:"binary"===r?-1:"string"===t?1:"string"===r?-1:"Date"===t?1:"Date"!==r?NaN:-1;switch(t){case"number":case"Date":case"string":return e>n?1:e<n?-1:0;case"binary":return qn(In(e),In(n));case"Array":return Tn(e,n)}}catch(e){}return NaN}function Tn(e,n){for(var t=e.length,r=n.length,i=t<r?t:r,o=0;o<i;++o){var a=Cn(e[o],n[o]);if(0!==a)return a}return t===r?0:t<r?-1:1}function qn(e,n){for(var t=e.length,r=n.length,i=t<r?t:r,o=0;o<i;++o)if(e[o]!==n[o])return e[o]<n[o]?-1:1;return t===r?0:t<r?-1:1}function Bn(e){var n=typeof e;if("object"!==n)return n;if(ArrayBuffer.isView(e))return"binary";var t=N(e);return"ArrayBuffer"===t?"binary":t}function In(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Rn=function(){function e(){}return e.prototype._trans=function(e,n,t){var r=this._tx||Ce.trans,i=this.name,o=de&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function a(e,t,r){if(!r.schema[i])throw new ee.NotFound("Table "+i+" not part of transaction");return n(r.idbtrans,r)}var u=Ve();try{var s=r&&r.db._novip===this.db._novip?r===Ce.trans?r._promise(e,a,t):an((function(){return r._promise(e,a,t)}),{trans:r,transless:Ce.transless||Ce}):bn(this.db,e,[this.name],a);return o&&(s._consoleTask=o,s=s.catch((function(e){return console.trace(e),mn(e)}))),s}finally{u&&Ye()}},e.prototype.get=function(e,n){var t=this;return e&&e.constructor===Object?this.where(e).first(n):null==e?mn(new ee.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(n){return t.core.get({trans:n,key:e}).then((function(e){return t.hook.reading.fire(e)}))})).then(n)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(u(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=a(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&n.every((function(n){return e.keyPath.indexOf(n)>=0}))){for(var t=0;t<n.length;++t)if(-1===n.indexOf(e.keyPath[t]))return!1;return!0}return!1})).sort((function(e,n){return e.keyPath.length-n.keyPath.length}))[0];if(t&&this.db._maxKey!==wn){var r=t.keyPath.slice(0,n.length);return this.where(r).equals(r.map((function(n){return e[n]})))}!t&&de&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var i=this.schema.idxByName,o=this.db._deps.indexedDB;function s(e,n){return 0===o.cmp(e,n)}var c=n.reduce((function(n,t){var r=n[0],o=n[1],a=i[t],c=e[t];return[r||a,r||!a?An(o,a&&a.multi?function(e){var n=O(e,t);return u(n)&&n.some((function(e){return s(c,e)}))}:function(e){return s(c,O(e,t))}):o]}),[null,null]),l=c[0],f=c[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(f):t?this.filter(f):this.where(n).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,u(e)?"[".concat(e.join("+"),"]"):e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){var n=this,r=n.db,i=n.name;this.schema.mappedClass=e,e.prototype instanceof jn&&(e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),n.prototype.table=function(){return i},n}(e));for(var o=new Set,a=e.prototype;a;a=c(a))Object.getOwnPropertyNames(a).forEach((function(e){return o.add(e)}));var u=function(n){if(!n)return n;var t=Object.create(e.prototype);for(var r in n)if(!o.has(r))try{t[r]=n[r]}catch(e){}return t};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),e},e.prototype.defineClass=function(){function e(e){s(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,n){var t=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Dn(o)(e)),this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"add",keys:null!=n?[n]:null,values:[a]})})).then((function(e){return e.numFailures?Ie.reject(e.failures[0]):e.lastResult})).then((function(n){if(o)try{P(e,o,n)}catch(e){}return n}))},e.prototype.update=function(e,n){if("object"!=typeof e||u(e))return this.where(":id").equals(e).modify(n);var t=O(e,this.schema.primKey.keyPath);return void 0===t?mn(new ee.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(n)},e.prototype.put=function(e,n){var t=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=Dn(o)(e)),this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"put",values:[a],keys:null!=n?[n]:null})})).then((function(e){return e.numFailures?Ie.reject(e.failures[0]):e.lastResult})).then((function(n){if(o)try{P(e,o,n)}catch(e){}return n}))},e.prototype.delete=function(e){var n=this;return this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Ie.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Sn})})).then((function(e){return e.numFailures?Ie.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",(function(t){return n.core.getMany({keys:e,trans:t}).then((function(e){return e.map((function(e){return n.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,n,t){var r=this,i=Array.isArray(n)?n:void 0,o=(t=t||(i?void 0:n))?t.allKeys:void 0;return this._trans("readwrite",(function(n){var t=r.schema.primKey,a=t.auto,u=t.keyPath;if(u&&i)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Dn(u)):e;return r.core.mutate({trans:n,type:"add",keys:i,values:c,wantResults:o}).then((function(e){var n=e.numFailures,t=e.results,i=e.lastResult,a=e.failures;if(0===n)return o?t:i;throw new G("".concat(r.name,".bulkAdd(): ").concat(n," of ").concat(s," operations failed"),a)}))}))},e.prototype.bulkPut=function(e,n,t){var r=this,i=Array.isArray(n)?n:void 0,o=(t=t||(i?void 0:n))?t.allKeys:void 0;return this._trans("readwrite",(function(n){var t=r.schema.primKey,a=t.auto,u=t.keyPath;if(u&&i)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,c=u&&a?e.map(Dn(u)):e;return r.core.mutate({trans:n,type:"put",keys:i,values:c,wantResults:o}).then((function(e){var n=e.numFailures,t=e.results,i=e.lastResult,a=e.failures;if(0===n)return o?t:i;throw new G("".concat(r.name,".bulkPut(): ").concat(n," of ").concat(s," operations failed"),a)}))}))},e.prototype.bulkUpdate=function(e){var n=this,t=this.core,r=e.map((function(e){return e.key})),i=e.map((function(e){return e.changes})),o=[];return this._trans("readwrite",(function(a){return t.getMany({trans:a,keys:r,cache:"clone"}).then((function(u){var s=[],c=[];e.forEach((function(e,t){var r=e.key,i=e.changes,a=u[t];if(a){for(var l=0,f=Object.keys(i);l<f.length;l++){var h=f[l],d=i[h];if(h===n.schema.primKey.keyPath){if(0!==Cn(d,r))throw new ee.Constraint("Cannot update primary key in bulkUpdate()")}else P(a,h,d)}o.push(t),s.push(r),c.push(a)}}));var l=s.length;return t.mutate({trans:a,type:"put",keys:s,values:c,updates:{keys:r,changeSpecs:i}}).then((function(e){var t=e.numFailures,r=e.failures;if(0===t)return l;for(var i=0,a=Object.keys(r);i<a.length;i++){var u=a[i],s=o[Number(u)];if(null!=s){var c=r[u];delete r[u],r[s]=c}}throw new G("".concat(n.name,".bulkUpdate(): ").concat(t," of ").concat(l," operations failed"),r)}))}))}))},e.prototype.bulkDelete=function(e){var n=this,t=e.length;return this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult,o=e.failures;if(0===r)return i;throw new G("".concat(n.name,".bulkDelete(): ").concat(r," of ").concat(t," operations failed"),o)}))},e}();function Nn(e){var n={},t=function(t,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return n[t].subscribe.apply(null,o),e}if("string"==typeof t)return n[t]};t.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return t;function o(e,r,i){if("object"==typeof e)return s(e);r||(r=fe),i||(i=ie);var o={subscribers:[],fire:i,subscribe:function(e){-1===o.subscribers.indexOf(e)&&(o.subscribers.push(e),o.fire=r(o.fire,e))},unsubscribe:function(e){o.subscribers=o.subscribers.filter((function(n){return n!==e})),o.fire=o.subscribers.reduce(r,i)}};return n[e]=t[e]=o,o}function s(e){a(e).forEach((function(n){var t=e[n];if(u(t))o(n,e[n][0],e[n][1]);else{if("asap"!==t)throw new ee.InvalidArgument("Invalid event config");var r=o(n,oe,(function(){for(var e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];r.subscribers.forEach((function(e){x((function(){e.apply(null,n)}))}))}))}}))}}function Mn(e,n){return y(n).from({prototype:e}),n}function Fn(e){return Mn(Rn.prototype,(function(n,t,r){this.db=e,this._tx=r,this.name=n,this.schema=t,this.hook=e._allTables[n]?e._allTables[n].hook:Nn(null,{creating:[se,ie],reading:[ae,oe],updating:[le,ie],deleting:[ce,ie]})}))}function Ln(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function $n(e,n){e.filter=An(e.filter,n)}function zn(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return An(r(),n())}:n,e.justLimit=t&&!r}function Un(e,n){e.isMatch=An(e.isMatch,n)}function Vn(e,n){if(e.isPrimKey)return n.primaryKey;var t=n.getIndexByKeyPath(e.index);if(!t)throw new ee.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return t}function Yn(e,n,t){var r=Vn(e,n.schema);return n.openCursor({trans:t,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Wn(e,n,t,r){var i=e.replayFilter?An(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,t,r){if(!i||i(t,r,(function(e){return t.stop(e)}),(function(e){return t.fail(e)}))){var a=t.primaryKey,u=""+a;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(a)),f(o,u)||(o[u]=!0,n(e,t,r))}};return Promise.all([e.or._iterate(a,t),Hn(Yn(e,r,t),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Hn(Yn(e,r,t),An(e.algorithm,i),n,!e.keysOnly&&e.valueMapper)}function Hn(e,n,t,r){var i=Je(r?function(e,n,i){return t(r(e),n,i)}:t);return e.then((function(e){if(e)return e.start((function(){var t=function(){return e.continue()};n&&!n(e,(function(e){return t=e}),(function(n){e.stop(n),t=ie}),(function(n){e.fail(n),t=ie}))||i(e.value,e,(function(e){return t=e})),t()}))}))}var Xn=Symbol(),Qn=function(){function e(e){Object.assign(this,e)}return e.prototype.execute=function(e){var n;if(void 0!==this.add){var t=this.add;if(u(t))return i(i([],u(e)?e:[],!0),t).sort();if("number"==typeof t)return(Number(e)||0)+t;if("bigint"==typeof t)try{return BigInt(e)+t}catch(e){return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(void 0!==this.remove){var r=this.remove;if(u(r))return u(e)?e.filter((function(e){return!r.includes(e)})).sort():[];if("number"==typeof r)return Number(e)-r;if("bigint"==typeof r)try{return BigInt(e)-r}catch(e){return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}var o=null===(n=this.replacePrefix)||void 0===n?void 0:n[0];return o&&"string"==typeof e&&e.startsWith(o)?this.replacePrefix[1]+e.substring(o.length):e},e}(),Gn=function(){function e(){}return e.prototype._read=function(e,n){var t=this._ctx;return t.error?t.table._trans(null,mn.bind(null,t.error)):t.table._trans("readonly",e).then(n)},e.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,mn.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=An(n.algorithm,e)},e.prototype._iterate=function(e,n){return Wn(this._ctx,e,n,this._ctx.table.core)},e.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return e&&s(t,e),n._ctx=t,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var n=this._ctx;return this._read((function(t){return Wn(n,e,t,n.table.core)}))},e.prototype.count=function(e){var n=this;return this._read((function(e){var t=n._ctx,r=t.table.core;if(Ln(t,!0))return r.count({trans:e,query:{index:Vn(t,r.schema),range:t.range}}).then((function(e){return Math.min(e,t.limit)}));var i=0;return Wn(t,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},e.prototype.sortBy=function(e,n){var t=e.split(".").reverse(),r=t[0],i=t.length-1;function o(e,n){return n?o(e[t[n]],n-1):e[r]}var a="next"===this._ctx.dir?1:-1;function u(e,n){var t=o(e,i),r=o(n,i);return t<r?-a:t>r?a:0}return this.toArray((function(e){return e.sort(u)})).then(n)},e.prototype.toArray=function(e){var n=this;return this._read((function(e){var t=n._ctx;if("next"===t.dir&&Ln(t,!0)&&t.limit>0){var r=t.valueMapper,i=Vn(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:i,range:t.range}}).then((function(e){var n=e.result;return r?n.map(r):n}))}var o=[];return Wn(t,(function(e){return o.push(e)}),e,t.table.core).then((function(){return o}))}),e)},e.prototype.offset=function(e){var n=this._ctx;return e<=0||(n.offset+=e,Ln(n)?zn(n,(function(){var n=e;return function(e,t){return 0===n||(1===n?(--n,!1):(t((function(){e.advance(n),n=0})),!1))}})):zn(n,(function(){var n=e;return function(){return--n<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),zn(this._ctx,(function(){var n=e;return function(e,t,r){return--n<=0&&t(r),n>=0}}),!0),this},e.prototype.until=function(e,n){return $n(this._ctx,(function(t,r,i){return!e(t.value)||(r(i),n)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return $n(this._ctx,(function(n){return e(n.value)})),Un(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each((function(n,t){e(t.key,t)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each((function(n,t){e(t.primaryKey,t)}))},e.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each((function(e,n){t.push(n.key)})).then((function(){return t})).then(e)},e.prototype.primaryKeys=function(e){var n=this._ctx;if("next"===n.dir&&Ln(n,!0)&&n.limit>0)return this._read((function(e){var t=Vn(n,n.table.core.schema);return n.table.core.query({trans:e,values:!1,limit:n.limit,query:{index:t,range:n.range}})})).then((function(e){return e.result})).then(e);n.keysOnly=!n.isMatch;var t=[];return this.each((function(e,n){t.push(n.primaryKey)})).then((function(){return t})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var t={};return $n(this._ctx,(function(e){var n=e.primaryKey.toString(),r=f(t,n);return t[n]=!0,!r})),this},e.prototype.modify=function(e){var n=this,t=this._ctx;return this._write((function(r){var i;if("function"==typeof e)i=e;else{var o=a(e),u=o.length;i=function(n){for(var t=!1,r=0;r<u;++r){var i=o[r],a=e[i],s=O(n,i);a instanceof Qn?(P(n,i,a.execute(s)),t=!0):s!==a&&(P(n,i,a),t=!0)}return t}}var s=t.table.core,c=s.schema.primaryKey,l=c.outbound,f=c.extractKey,h=n.db._options.modifyChunkSize||200,d=[],p=0,y=[],v=function(e,n){var t=n.failures,r=n.numFailures;p+=e-r;for(var i=0,o=a(t);i<o.length;i++){var u=o[i];d.push(t[u])}};return n.clone().primaryKeys().then((function(n){var o=Ln(t)&&t.limit===1/0&&("function"!=typeof e||e===Jn)&&{index:t.index,range:t.range},a=function(t){var u=Math.min(h,n.length-t);return s.getMany({trans:r,keys:n.slice(t,t+u),cache:"immutable"}).then((function(c){for(var d=[],p=[],y=l?[]:null,m=[],b=0;b<u;++b){var g=c[b],w={value:B(g),primKey:n[t+b]};!1!==i.call(w,w.value,w)&&(null==w.value?m.push(n[t+b]):l||0===Cn(f(g),f(w.value))?(p.push(w.value),l&&y.push(n[t+b])):(m.push(n[t+b]),d.push(w.value)))}return Promise.resolve(d.length>0&&s.mutate({trans:r,type:"add",values:d}).then((function(e){for(var n in e.failures)m.splice(parseInt(n),1);v(d.length,e)}))).then((function(){return(p.length>0||o&&"object"==typeof e)&&s.mutate({trans:r,type:"put",keys:y,values:p,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:t>0}).then((function(e){return v(p.length,e)}))})).then((function(){return(m.length>0||o&&e===Jn)&&s.mutate({trans:r,type:"delete",keys:m,criteria:o,isAdditionalChunk:t>0}).then((function(e){return v(m.length,e)}))})).then((function(){return n.length>t+u&&a(t+h)}))}))};return a(0).then((function(){if(d.length>0)throw new Q("Error modifying one or more objects",d,p,y);return n.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,n=e.range;return Ln(e)&&(e.isPrimKey||3===n.type)?this._write((function(t){var r=e.table.core.schema.primaryKey,i=n;return e.table.core.count({trans:t,query:{index:r,range:i}}).then((function(n){return e.table.core.mutate({trans:t,type:"deleteRange",range:i}).then((function(e){var t=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Q("Could not delete some values",Object.keys(t).map((function(e){return t[e]})),n-r);return n-r}))}))})):this.modify(Jn)},e}(),Jn=function(e,n){return n.value=null};function Zn(e){return Mn(Gn.prototype,(function(n,t){this.db=e;var r=Sn,i=null;if(t)try{r=t()}catch(e){i=e}var o=n._ctx,a=o.table,u=a.hook.reading.fire;this._ctx={table:a,index:o.index,isPrimKey:!o.index||a.schema.primKey.keyPath&&o.index===a.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:o.or,valueMapper:u!==oe?u:null}}))}function et(e,n){return e<n?-1:e===n?0:1}function nt(e,n){return e>n?-1:e===n?0:1}function tt(e,n,t){var r=e instanceof lt?new e.Collection(e):e;return r._ctx.error=t?new t(n):new TypeError(n),r}function rt(e){return new e.Collection(e,(function(){return ct("")})).limit(0)}function it(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function ot(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function at(e,n,t,r,i,o){for(var a=Math.min(e.length,r.length),u=-1,s=0;s<a;++s){var c=n[s];if(c!==r[s])return i(e[s],t[s])<0?e.substr(0,s)+t[s]+t.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+t.substr(s+1):u>=0?e.substr(0,u)+n[u]+t.substr(u+1):null;i(e[s],c)<0&&(u=s)}return a<r.length&&"next"===o?e+t.substr(e.length):a<e.length&&"prev"===o?e.substr(0,t.length):u<0?null:e.substr(0,u)+r[u]+t.substr(u+1)}function ut(e,n,t,r){var i,o,a,u,s,c,l,f=t.length;if(!t.every((function(e){return"string"==typeof e})))return tt(e,kn);function h(e){i=it(e),o=ot(e),a="next"===e?et:nt;var n=t.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,n){return a(e.lower,n.lower)}));u=n.map((function(e){return e.upper})),s=n.map((function(e){return e.lower})),c=e,l="next"===e?"":r}h("next");var d=new e.Collection(e,(function(){return st(u[0],s[f-1]+r)}));d._ondirectionchange=function(e){h(e)};var p=0;return d._addAlgorithm((function(e,t,r){var i=e.key;if("string"!=typeof i)return!1;var h=o(i);if(n(h,s,p))return!0;for(var d=null,y=p;y<f;++y){var v=at(i,h,u[y],s[y],a,c);null===v&&null===d?p=y+1:(null===d||a(d,v)>0)&&(d=v)}return t(null!==d?function(){e.continue(d+l)}:r),!1})),d}function st(e,n,t,r){return{type:2,lower:e,upper:n,lowerOpen:t,upperOpen:r}}function ct(e){return{type:1,lower:e,upper:e}}var lt=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,n,t,r){t=!1!==t,r=!0===r;try{return this._cmp(e,n)>0||0===this._cmp(e,n)&&(t||r)&&(!t||!r)?rt(this):new this.Collection(this,(function(){return st(e,n,!t,!r)}))}catch(e){return tt(this,xn)}},e.prototype.equals=function(e){return null==e?tt(this,xn):new this.Collection(this,(function(){return ct(e)}))},e.prototype.above=function(e){return null==e?tt(this,xn):new this.Collection(this,(function(){return st(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?tt(this,xn):new this.Collection(this,(function(){return st(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?tt(this,xn):new this.Collection(this,(function(){return st(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?tt(this,xn):new this.Collection(this,(function(){return st(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?tt(this,kn):this.between(e,e+wn,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):ut(this,(function(e,n){return 0===e.indexOf(n[0])}),[e],wn)},e.prototype.equalsIgnoreCase=function(e){return ut(this,(function(e,n){return e===n[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=z.apply($,arguments);return 0===e.length?rt(this):ut(this,(function(e,n){return-1!==n.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=z.apply($,arguments);return 0===e.length?rt(this):ut(this,(function(e,n){return n.some((function(n){return 0===e.indexOf(n)}))}),e,wn)},e.prototype.anyOf=function(){var e=this,n=z.apply($,arguments),t=this._cmp;try{n.sort(t)}catch(e){return tt(this,xn)}if(0===n.length)return rt(this);var r=new this.Collection(this,(function(){return st(n[0],n[n.length-1])}));r._ondirectionchange=function(r){t="next"===r?e._ascending:e._descending,n.sort(t)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;t(a,n[i])>0;)if(++i===n.length)return r(o),!1;return 0===t(a,n[i])||(r((function(){e.continue(n[i])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[_n,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=z.apply($,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return tt(this,xn)}var n=e.reduce((function(e,n){return e?e.concat([[e[e.length-1][1],n]]):[[_n,n]]}),null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,n){var t=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,u=this._max;if(0===e.length)return rt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return tt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);var s=!n||!1!==n.includeLowers,c=n&&!0===n.includeUppers;function l(e,n){for(var t=0,i=e.length;t<i;++t){var o=e[t];if(r(n[0],o[1])<0&&r(n[1],o[0])>0){o[0]=a(o[0],n[0]),o[1]=u(o[1],n[1]);break}}return t===i&&e.push(n),e}var f,h=i;function d(e,n){return h(e[0],n[0])}try{(f=e.reduce(l,[])).sort(d)}catch(e){return tt(this,xn)}var p=0,y=c?function(e){return i(e,f[p][1])>0}:function(e){return i(e,f[p][1])>=0},v=s?function(e){return o(e,f[p][0])>0}:function(e){return o(e,f[p][0])>=0};function m(e){return!y(e)&&!v(e)}var b=y,g=new this.Collection(this,(function(){return st(f[0][0],f[f.length-1][1],!s,!c)}));return g._ondirectionchange=function(e){"next"===e?(b=y,h=i):(b=v,h=o),f.sort(d)},g._addAlgorithm((function(e,n,r){for(var o=e.key;b(o);)if(++p===f.length)return n(r),!1;return!!m(o)||(0===t._cmp(o,f[p][1])||0===t._cmp(o,f[p][0])||n((function(){h===i?e.continue(f[p][0]):e.continue(f[p][1])})),!1)})),g},e.prototype.startsWithAnyOf=function(){var e=z.apply($,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?rt(this):this.inAnyRange(e.map((function(e){return[e,e+wn]}))):tt(this,"startsWithAnyOf() only works with strings")},e}();function ft(e){return Mn(lt.prototype,(function(n,t,r){if(this.db=e,this._ctx={table:n,index:":id"===t?null:t,or:r},this._cmp=this._ascending=Cn,this._descending=function(e,n){return Cn(n,e)},this._max=function(e,n){return Cn(e,n)>0?e:n},this._min=function(e,n){return Cn(e,n)<0?e:n},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new ee.MissingAPI}))}function ht(e){return Je((function(n){return dt(n),e(n.target.error),!1}))}function dt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var pt="storagemutated",yt="x-storagemutated-1",vt=Nn(null,pt),mt=function(){function e(){}return e.prototype._lock=function(){return _(!Ce.global),++this._reculock,1!==this._reculock||Ce.global||(Ce.lockOwnerFor=this),this},e.prototype._unlock=function(){if(_(!Ce.global),0==--this._reculock)for(Ce.global||(Ce.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{pn(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Ce.lockOwnerFor!==this},e.prototype.create=function(e){var n=this;if(!this.mode)return this;var t=this.db.idbdb,r=this.db._state.dbOpenError;if(_(!this.idbtrans),!e&&!t)switch(r&&r.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(r);case"MissingAPIError":throw new ee.MissingAPI(r.message,r);default:throw new ee.OpenFailed(r)}if(!this.active)throw new ee.TransactionInactive;return _(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Je((function(t){dt(t),n._reject(e.error)})),e.onabort=Je((function(t){dt(t),n.active&&n._reject(new ee.Abort(e.error)),n.active=!1,n.on("abort").fire(t)})),e.oncomplete=Je((function(){n.active=!1,n._resolve(),"mutatedParts"in e&&vt.storagemutated.fire(e.mutatedParts)})),this},e.prototype._promise=function(e,n,t){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return mn(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return mn(new ee.TransactionInactive);if(this._locked())return new Ie((function(i,o){r._blockedFuncs.push([function(){r._promise(e,n,t).then(i,o)},Ce])}));if(t)return an((function(){var e=new Ie((function(e,t){r._lock();var i=n(e,t,r);i&&i.then&&i.then(e,t)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Ie((function(e,t){var i=n(e,t,r);i&&i.then&&i.then(e,t)}));return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var n=this._root(),t=Ie.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then((function(){return t}));else{n._waitingFor=t,n._waitingQueue=[];var r=n.idbtrans.objectStore(n.storeNames[0]);!function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=n._waitingFor;return new Ie((function(e,r){t.then((function(t){return n._waitingQueue.push(Je(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Je(r.bind(null,e)))})).finally((function(){n._waitingFor===i&&(n._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))},e.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(f(n,e))return n[e];var t=this.schema[e];if(!t)throw new ee.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,t,this);return r.core=this.db.core.table(e),n[e]=r,r},e}();function bt(e){return Mn(mt.prototype,(function(n,t,r,i,o){var a=this;this.db=e,this.mode=n,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Nn(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ie((function(e,n){a._resolve=e,a._reject=n})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var n=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):n&&a.idbtrans&&a.idbtrans.abort(),mn(e)}))}))}function gt(e,n,t,r,i,o,a){return{name:e,keyPath:n,unique:t,multi:r,auto:i,compound:o,src:(t&&!a?"&":"")+(r?"*":"")+(i?"++":"")+wt(n)}}function wt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function _t(e,n,t){return{name:e,primKey:n,indexes:t,mappedClass:null,idxByName:k(t,(function(e){return[e.name,e]}))}}function xt(e){return 1===e.length?e[0]:e}var kt=function(e){try{return e.only([[]]),kt=function(){return[[]]},[[]]}catch(e){return kt=function(){return wn},wn}};function Ot(e){return null==e?function(){}:"string"==typeof e?Pt(e):function(n){return O(n,e)}}function Pt(e){return 1===e.split(".").length?function(n){return n[e]}:function(n){return O(n,e)}}function Et(e){return[].slice.call(e)}var Kt=0;function At(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function St(e,n,t){function r(e,n){var t=Et(e.objectStoreNames);return{schema:{name:e.name,tables:t.map((function(e){return n.objectStore(e)})).map((function(e){var n=e.keyPath,t=e.autoIncrement,r=u(n),i=null==n,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:n,autoIncrement:t,unique:!0,extractKey:Ot(n)},indexes:Et(e.indexNames).map((function(n){return e.index(n)})).map((function(e){var n=e.name,t=e.unique,r=e.multiEntry,i=e.keyPath,a={name:n,compound:u(i),keyPath:i,unique:t,multiEntry:r,extractKey:Ot(i)};return o[At(i)]=a,a})),getIndexByKeyPath:function(e){return o[At(e)]}};return o[":id"]=a.primaryKey,null!=n&&(o[At(n)]=a.primaryKey),a}))},hasGetAll:t.length>0&&"getAll"in n.objectStore(t[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,i=e.lowerOpen,o=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!o):void 0===r?n.lowerBound(t,!!i):n.bound(t,r,!!i,!!o)}function o(e){var n=e.name;function t(e){var t=e.trans,r=e.type,o=e.keys,a=e.values,u=e.range;return new Promise((function(e,s){e=Je(e);var c=t.objectStore(n),l=null==c.keyPath,f="put"===r||"add"===r;if(!f&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,d=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===d)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],y=[],v=0,m=function(e){++v,dt(e)};if("deleteRange"===r){if(4===u.type)return e({numFailures:v,failures:y,results:[],lastResult:void 0});3===u.type?p.push(h=c.clear()):p.push(h=c.delete(i(u)))}else{var b=f?l?[a,o]:[a,null]:[o,null],g=b[0],w=b[1];if(f)for(var _=0;_<d;++_)p.push(h=w&&void 0!==w[_]?c[r](g[_],w[_]):c[r](g[_])),h.onerror=m;else for(_=0;_<d;++_)p.push(h=c[r](g[_])),h.onerror=m}var x=function(n){var t=n.target.result;p.forEach((function(e,n){return null!=e.error&&(y[n]=e.error)})),e({numFailures:v,failures:y,results:"delete"===r?o:p.map((function(e){return e.result})),lastResult:t})};h.onerror=function(e){m(e),x(e)},h.onsuccess=x}))}function r(e){var t=e.trans,r=e.values,o=e.query,a=e.reverse,u=e.unique;return new Promise((function(e,s){e=Je(e);var c=o.index,l=o.range,f=t.objectStore(n),h=c.isPrimaryKey?f:f.index(c.name),d=a?u?"prevunique":"prev":u?"nextunique":"next",p=r||!("openKeyCursor"in h)?h.openCursor(i(l),d):h.openKeyCursor(i(l),d);p.onerror=ht(s),p.onsuccess=Je((function(n){var r=p.result;if(r){r.___id=++Kt,r.done=!1;var i=r.continue.bind(r),o=r.continuePrimaryKey;o&&(o=o.bind(r));var a=r.advance.bind(r),u=function(){throw new Error("Cursor not started")},c=function(){throw new Error("Cursor not stopped")};r.trans=t,r.stop=r.continue=r.continuePrimaryKey=r.advance=u,r.fail=Je(s),r.next=function(){var e=this,n=1;return this.start((function(){return n--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var n=new Promise((function(e,n){e=Je(e),p.onerror=ht(n),r.fail=n,r.stop=function(n){r.stop=r.continue=r.continuePrimaryKey=r.advance=c,e(n)}})),t=function(){if(p.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return p.onsuccess=Je((function(e){p.onsuccess=t,t()})),r.continue=i,r.continuePrimaryKey=o,r.advance=a,t(),n},e(r)}else e(null)}),s)}))}function o(e){return function(t){return new Promise((function(r,o){r=Je(r);var a=t.trans,u=t.values,s=t.limit,c=t.query,l=s===1/0?void 0:s,f=c.index,h=c.range,d=a.objectStore(n),p=f.isPrimaryKey?d:d.index(f.name),y=i(h);if(0===s)return r({result:[]});if(e){var v=u?p.getAll(y,l):p.getAllKeys(y,l);v.onsuccess=function(e){return r({result:e.target.result})},v.onerror=ht(o)}else{var m=0,b=u||!("openKeyCursor"in p)?p.openCursor(y):p.openKeyCursor(y),g=[];b.onsuccess=function(e){var n=b.result;return n?(g.push(u?n.value:n.primaryKey),++m===s?r({result:g}):void n.continue()):r({result:g})},b.onerror=ht(o)}}))}}return{name:n,schema:e,mutate:t,getMany:function(e){var t=e.trans,r=e.keys;return new Promise((function(e,i){e=Je(e);for(var o,a=t.objectStore(n),u=r.length,s=new Array(u),c=0,l=0,f=function(n){var t=n.target;s[t._pos]=t.result,++l===c&&e(s)},h=ht(i),d=0;d<u;++d)null!=r[d]&&((o=a.get(r[d]))._pos=d,o.onsuccess=f,o.onerror=h,++c);0===c&&e(s)}))},get:function(e){var t=e.trans,r=e.key;return new Promise((function(e,i){e=Je(e);var o=t.objectStore(n).get(r);o.onsuccess=function(n){return e(n.target.result)},o.onerror=ht(i)}))},query:o(c),openCursor:r,count:function(e){var t=e.query,r=e.trans,o=t.index,a=t.range;return new Promise((function(e,t){var u=r.objectStore(n),s=o.isPrimaryKey?u:u.index(o.name),c=i(a),l=c?s.count(c):s.count();l.onsuccess=Je((function(n){return e(n.target.result)})),l.onerror=ht(t)}))}}}var a=r(e,t),s=a.schema,c=a.hasGetAll,l=s.tables.map((function(e){return o(e)})),f={};return l.forEach((function(e){return f[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!f[e])throw new Error("Table '".concat(e,"' not found"));return f[e]},MIN_KEY:-1/0,MAX_KEY:kt(n),schema:s}}function Dt(e,n){return n.reduce((function(e,n){var t=n.create;return r(r({},e),t(e))}),e)}function jt(e,n,t,r){var i=t.IDBKeyRange;return t.indexedDB,{dbcore:Dt(St(n,i,r),e.dbcore)}}function Ct(e,n){var t=n.db,r=jt(e._middlewares,t,e._deps,n);e.core=r.dbcore,e.tables.forEach((function(n){var t=n.name;e.core.schema.tables.some((function(e){return e.name===t}))&&(n.core=e.core.table(t),e[t]instanceof e.Table&&(e[t].core=n.core))}))}function Tt(e,n,t,r){t.forEach((function(t){var i=r[t];n.forEach((function(n){var r=m(n,t);(!r||"value"in r&&void 0===r.value)&&(n===e.Transaction.prototype||n instanceof e.Transaction?p(n,t,{get:function(){return this.table(t)},set:function(e){d(this,t,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):n[t]=new e.Table(t,i))}))}))}function qt(e,n){n.forEach((function(n){for(var t in n)n[t]instanceof e.Table&&delete n[t]}))}function Bt(e,n){return e._cfg.version-n._cfg.version}function It(e,n,t,r){var i=e._dbSchema;t.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=_t("$meta",Xt("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,i);o.create(t),o._completion.catch(r);var u=o._reject.bind(o),s=Ce.transless||Ce;an((function(){if(Ce.trans=o,Ce.transless=s,0!==n)return Ct(e,t),Nt(e,o,n).then((function(n){return Mt(e,n,o,t)})).catch(u);a(i).forEach((function(e){Lt(t,e,i[e].primKey,i[e].indexes)})),Ct(e,t),Ie.follow((function(){return e.on.populate.fire(o)})).catch(u)}))}function Rt(e,n){$t(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var t=Vt(e,e.idbdb,n);Ht(e,e._dbSchema,n);for(var r=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var t=n.objectStore(e.name);e.add.forEach((function(n){de&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(n.src)),Ut(t,n)}))},i=0,o=Ft(t,e._dbSchema).change;i<o.length;i++){var a=r(o[i]);if("object"==typeof a)return a.value}}function Nt(e,n,t){return n.storeNames.includes("$meta")?n.table("$meta").get("version").then((function(e){return null!=e?e:t})):Ie.resolve(t)}function Mt(e,n,t,r){var i=[],o=e._versions,u=e._dbSchema=Vt(e,e.idbdb,r),s=o.filter((function(e){return e._cfg.version>=n}));if(0===s.length)return Ie.resolve();function c(){return i.length?Ie.resolve(i.shift()(t.idbtrans)).then(c):Ie.resolve()}return s.forEach((function(o){i.push((function(){var i=u,s=o._cfg.dbschema;Ht(e,i,r),Ht(e,s,r),u=e._dbSchema=s;var c=Ft(i,s);c.add.forEach((function(e){Lt(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((function(e){if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");var n=r.objectStore(e.name);e.add.forEach((function(e){return Ut(n,e)})),e.change.forEach((function(e){n.deleteIndex(e.name),Ut(n,e)})),e.del.forEach((function(e){return n.deleteIndex(e)}))}));var l=o._cfg.contentUpgrade;if(l&&o._cfg.version>n){Ct(e,r),t._memoizedTables={};var f=K(s);c.del.forEach((function(e){f[e]=i[e]})),qt(e,[e.Transaction.prototype]),Tt(e,[e.Transaction.prototype],a(f),f),t.schema=f;var h,d=U(l);d&&un();var p=Ie.follow((function(){if((h=l(t))&&d){var e=sn.bind(null,null);h.then(e,e)}}));return h&&"function"==typeof h.then?Ie.resolve(h):p.then((function(){return h}))}})),i.push((function(n){zt(o._cfg.dbschema,n),qt(e,[e.Transaction.prototype]),Tt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),t.schema=e._dbSchema})),i.push((function(n){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===o._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter((function(e){return"$meta"!==e}))):n.objectStore("$meta").put(o._cfg.version,"version"))}))})),c().then((function(){$t(u,r)}))}function Ft(e,n){var t,r={del:[],add:[],change:[]};for(t in e)n[t]||r.del.push(t);for(t in n){var i=e[t],o=n[t];if(i){var a={name:t,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto)a.recreate=!0,r.change.push(a);else{var u=i.idxByName,s=o.idxByName,c=void 0;for(c in u)s[c]||a.del.push(c);for(c in s){var l=u[c],f=s[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([t,o])}return r}function Lt(e,n,t,r){var i=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach((function(e){return Ut(i,e)})),i}function $t(e,n){a(e).forEach((function(t){n.db.objectStoreNames.contains(t)||(de&&console.debug("Dexie: Creating missing table",t),Lt(n,t,e[t].primKey,e[t].indexes))}))}function zt(e,n){[].slice.call(n.db.objectStoreNames).forEach((function(t){return null==e[t]&&n.db.deleteObjectStore(t)}))}function Ut(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function Vt(e,n,t){var r={};return g(n.objectStoreNames,0).forEach((function(e){for(var n=t.objectStore(e),i=n.keyPath,o=gt(wt(i),i||"",!0,!1,!!n.autoIncrement,i&&"string"!=typeof i,!0),a=[],u=0;u<n.indexNames.length;++u){var s=n.index(n.indexNames[u]);i=s.keyPath;var c=gt(s.name,i,!!s.unique,!!s.multiEntry,!1,i&&"string"!=typeof i,!1);a.push(c)}r[e]=_t(e,o,a)})),r}function Yt(e,n,t){e.verno=n.version/10;var r=e._dbSchema=Vt(e,n,t);e._storeNames=g(n.objectStoreNames,0),Tt(e,[e._allTables],a(r),r)}function Wt(e,n){var t=Ft(Vt(e,e.idbdb,n),e._dbSchema);return!(t.add.length||t.change.some((function(e){return e.add.length||e.change.length})))}function Ht(e,n,t){for(var r=t.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],u=t.objectStore(a);e._hasGetAll="getAll"in u;for(var s=0;s<u.indexNames.length;++s){var c=u.indexNames[s],l=u.index(c).keyPath,f="string"==typeof l?l:"["+g(l).join("+")+"]";if(n[a]){var h=n[a].idxByName[f];h&&(h.name=c,delete n[a].idxByName[f],n[a].idxByName[c]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Xt(e){return e.split(",").map((function(e,n){var t=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;return gt(t,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),u(r),0===n)}))}var Qt,Gt=function(){function e(){}return e.prototype._parseStoresSpec=function(e,n){a(e).forEach((function(t){if(null!==e[t]){var r=Xt(e[t]),i=r.shift();if(i.unique=!0,i.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),n[t]=_t(t,i,r)}}))},e.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var t=n._versions,r={},i={};return t.forEach((function(e){s(r,e._cfg.storesSource),i=e._cfg.dbschema={},e._parseStoresSpec(r,i)})),n._dbSchema=i,qt(n,[n._allTables,n,n.Transaction.prototype]),Tt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],a(i),i),n._storeNames=a(i),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=he(this._cfg.contentUpgrade||ie,e),this},e}();function Jt(e){return Mn(Gt.prototype,(function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}function Zt(e,n){var t=e._dbNamesDB;return t||(t=e._dbNamesDB=new ei(Pn,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),t.table("dbnames")}function er(e){return e&&"function"==typeof e.databases}function nr(e){var n=e.indexedDB,t=e.IDBKeyRange;return er(n)?Promise.resolve(n.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Pn}))})):Zt(n,t).toCollection().primaryKeys()}function tr(e,n){var t=e.indexedDB,r=e.IDBKeyRange;!er(t)&&n!==Pn&&Zt(t,r).put({name:n}).catch(ie)}function rr(e,n){var t=e.indexedDB,r=e.IDBKeyRange;!er(t)&&n!==Pn&&Zt(t,r).delete(n).catch(ie)}function ir(e){return an((function(){return Ce.letThrough=!0,e()}))}function or(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(n){var t=function(){return indexedDB.databases().finally(n)};e=setInterval(t,100),t()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function ar(e){return!("from"in e)}var ur=function(e,n){if(!this){var t=new ur;return e&&"d"in e&&s(t,e),t}s(this,arguments.length?{d:1,from:e,to:arguments.length>1?n:e}:{d:0})};function sr(e,n,t){var r=Cn(n,t);if(!isNaN(r)){if(r>0)throw RangeError();if(ar(e))return s(e,{from:n,to:t,d:1});var i=e.l,o=e.r;if(Cn(t,e.from)<0)return i?sr(i,n,t):e.l={from:n,to:t,d:1,l:null,r:null},hr(e);if(Cn(n,e.to)>0)return o?sr(o,n,t):e.r={from:n,to:t,d:1,l:null,r:null},hr(e);Cn(n,e.from)<0&&(e.from=n,e.l=null,e.d=o?o.d+1:1),Cn(t,e.to)>0&&(e.to=t,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;i&&!e.l&&cr(e,i),o&&a&&cr(e,o)}}function cr(e,n){function t(e,n){var r=n.from,i=n.to,o=n.l,a=n.r;sr(e,r,i),o&&t(e,o),a&&t(e,a)}ar(n)||t(e,n)}function lr(e,n){var t=fr(n),r=t.next();if(r.done)return!1;for(var i=r.value,o=fr(e),a=o.next(i.from),u=a.value;!r.done&&!a.done;){if(Cn(u.from,i.to)<=0&&Cn(u.to,i.from)>=0)return!0;Cn(i.from,u.from)<0?i=(r=t.next(u.from)).value:u=(a=o.next(i.from)).value}return!1}function fr(e){var n=ar(e)?null:{s:0,n:e};return{next:function(e){for(var t=arguments.length>0;n;)switch(n.s){case 0:if(n.s=1,t)for(;n.n.l&&Cn(e,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!t||Cn(e,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function hr(e){var n,t,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(t=e.l)||void 0===t?void 0:t.d)||0),o=i>1?"r":i<-1?"l":"";if(o){var a="r"===o?"l":"r",u=r({},e),s=e[o];e.from=s.from,e.to=s.to,e[o]=s[o],u[o]=s[a],e[a]=u,u.d=dr(u)}e.d=dr(e)}function dr(e){var n=e.r,t=e.l;return(n?t?Math.max(n.d,t.d):n.d:t?t.d:0)+1}function pr(e,n){return a(n).forEach((function(t){e[t]?cr(e[t],n[t]):e[t]=C(n[t])})),e}function yr(e,n){return e.all||n.all||Object.keys(e).some((function(t){return n[t]&&lr(n[t],e[t])}))}h(ur.prototype,((Qt={add:function(e){return cr(this,e),this},addKey:function(e){return sr(this,e,e),this},addKeys:function(e){var n=this;return e.forEach((function(e){return sr(n,e,e)})),this},hasKey:function(e){var n=fr(this).next(e).value;return n&&Cn(n.from,e)<=0&&Cn(n.to,e)>=0}})[M]=function(){return fr(this)},Qt));var vr={},mr={},br=!1;function gr(e,n){pr(mr,e),br||(br=!0,setTimeout((function(){br=!1;var e=mr;mr={},wr(e,!1)}),0))}function wr(e,n){void 0===n&&(n=!1);var t=new Set;if(e.all)for(var r=0,i=Object.values(vr);r<i.length;r++)_r(u=i[r],e,t,n);else for(var o in e){var a=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(a){var u,s=a[1],c=a[2];(u=vr["idb://".concat(s,"/").concat(c)])&&_r(u,e,t,n)}}t.forEach((function(e){return e()}))}function _r(e,n,t,r){for(var i=[],o=0,a=Object.entries(e.queries.query);o<a.length;o++){for(var u=a[o],s=u[0],c=[],l=0,f=u[1];l<f.length;l++){var h=f[l];yr(n,h.obsSet)?h.subscribers.forEach((function(e){return t.add(e)})):r&&c.push(h)}r&&i.push([s,c])}if(r)for(var d=0,p=i;d<p.length;d++){var y=p[d];s=y[0],c=y[1],e.queries.query[s]=c}}function xr(e){var n=e._state,t=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((function(){return n.dbOpenError?mn(n.dbOpenError):e}));n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r=n.openCanceller,i=Math.round(10*e.verno),o=!1;function a(){if(n.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}var u=n.dbReadyResolve,s=null,c=!1,l=function(){return new Ie((function(r,u){if(a(),!t)throw new ee.MissingAPI;var f=e.name,h=n.autoSchema||!i?t.open(f):t.open(f,i);if(!h)throw new ee.MissingAPI;h.onerror=ht(u),h.onblocked=Je(e._fireOnBlocked),h.onupgradeneeded=Je((function(r){if(s=h.transaction,n.autoSchema&&!e._options.allowEmptyDB){h.onerror=dt,s.abort(),h.result.close();var i=t.deleteDatabase(f);i.onsuccess=i.onerror=Je((function(){u(new ee.NoSuchDatabase("Database ".concat(f," doesnt exist")))}))}else{s.onerror=ht(u);var a=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;c=a<1,e.idbdb=h.result,o&&Rt(e,s),It(e,a/10,s,u)}}),u),h.onsuccess=Je((function(){s=null;var t=e.idbdb=h.result,a=g(t.objectStoreNames);if(a.length>0)try{var u=t.transaction(xt(a),"readonly");if(n.autoSchema)Yt(e,t,u);else if(Ht(e,e._dbSchema,u),!Wt(e,u)&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),t.close(),i=t.version+1,o=!0,r(l());Ct(e,u)}catch(e){}On.push(e),t.onversionchange=Je((function(t){n.vcFired=!0,e.on("versionchange").fire(t)})),t.onclose=Je((function(n){e.on("close").fire(n)})),c&&tr(e._deps,f),r()}),u)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(n.PR1398_maxLoop>0)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l();break;case"VersionError":if(i>0)return i=0,l()}return Ie.reject(e)}))};return Ie.race([r,("undefined"==typeof navigator?Ie.resolve():or()).then(l)]).then((function(){return a(),n.onReadyBeingFired=[],Ie.resolve(ir((function(){return e.on.ready.fire(e.vip)}))).then((function t(){if(n.onReadyBeingFired.length>0){var r=n.onReadyBeingFired.reduce(he,ie);return n.onReadyBeingFired=[],Ie.resolve(ir((function(){return r(e.vip)}))).then(t)}}))})).finally((function(){n.openCanceller===r&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)})).catch((function(t){n.dbOpenError=t;try{s&&s.abort()}catch(e){}return r===n.openCanceller&&e._close(),mn(t)})).finally((function(){n.openComplete=!0,u()})).then((function(){if(c){var n={};e.tables.forEach((function(t){t.schema.indexes.forEach((function(r){r.name&&(n["idb://".concat(e.name,"/").concat(t.name,"/").concat(r.name)]=new ur(-1/0,[[[]]]))})),n["idb://".concat(e.name,"/").concat(t.name,"/")]=n["idb://".concat(e.name,"/").concat(t.name,"/:dels")]=new ur(-1/0,[[[]]])})),vt(pt).fire(n),wr(n,!0)}return e}))}function kr(e){var n=function(n){return e.next(n)},t=function(n){return e.throw(n)},r=o(n),i=o(t);function o(e){return function(n){var t=e(n),o=t.value;return t.done?o:o&&"function"==typeof o.then?o.then(r,i):u(o)?Promise.all(o).then(r,i):r(o)}}return o(n)()}function Or(e,n,t){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return t=i.pop(),[e,S(i),t]}function Pr(e,n,t,r,i){return Ie.resolve().then((function(){var o=Ce.transless||Ce,a=e._createTransaction(n,t,e._dbSchema,r);a.explicit=!0;var u={trans:a,transless:o};if(r)a.idbtrans=r.idbtrans;else try{a.create(),a.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(r){return r.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then((function(){return Pr(e,n,t,null,i)}))):mn(r)}var s,c=U(i);c&&un();var l=Ie.follow((function(){if(s=i.call(a,a))if(c){var e=sn.bind(null,null);s.then(e,e)}else"function"==typeof s.next&&"function"==typeof s.throw&&(s=kr(s))}),u);return(s&&"function"==typeof s.then?Ie.resolve(s).then((function(e){return a.active?e:mn(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return s}))).then((function(e){return r&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),mn(e)}))}))}function Er(e,n,t){for(var r=u(e)?e.slice():[e],i=0;i<t;++i)r.push(n);return r}function Kr(e){return r(r({},e),{table:function(n){var t=e.table(n),i=t.schema,o={},a=[];function u(e,n,t){var i=At(e),s=o[i]=o[i]||[],c=null==e?0:"string"==typeof e?1:e.length,l=n>0,f=r(r({},t),{name:l?"".concat(i,"(virtual-from:").concat(t.name,")"):t.name,lowLevelIndex:t,isVirtual:l,keyTail:n,keyLength:c,extractKey:Ot(e),unique:!l&&t.unique});return s.push(f),f.isPrimaryKey||a.push(f),c>1&&u(2===c?e[0]:e.slice(0,c-1),n+1,t),s.sort((function(e,n){return e.keyTail-n.keyTail})),f}var s=u(i.primaryKey.keyPath,0,i.primaryKey);o[":id"]=[s];for(var c=0,l=i.indexes;c<l.length;c++){var f=l[c];u(f.keyPath,0,f)}function h(e){var n=o[At(e)];return n&&n[0]}function d(n,t){return{type:1===n.type?2:n.type,lower:Er(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,t),lowerOpen:!0,upper:Er(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,t),upperOpen:!0}}function p(e){var n=e.query.index;return n.isVirtual?r(r({},e),{query:{index:n.lowLevelIndex,range:d(e.query.range,n.keyTail)}}):e}var y=r(r({},t),{schema:r(r({},i),{primaryKey:s,indexes:a,getIndexByKeyPath:h}),count:function(e){return t.count(p(e))},query:function(e){return t.query(p(e))},openCursor:function(n){var r=n.query.index,i=r.keyTail,o=r.isVirtual,a=r.keyLength;if(!o)return t.openCursor(n);function u(t){function r(r){null!=r?t.continue(Er(r,n.reverse?e.MAX_KEY:e.MIN_KEY,i)):n.unique?t.continue(t.key.slice(0,a).concat(n.reverse?e.MIN_KEY:e.MAX_KEY,i)):t.continue()}var o=Object.create(t,{continue:{value:r},continuePrimaryKey:{value:function(n,r){t.continuePrimaryKey(Er(n,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return t.primaryKey}},key:{get:function(){var e=t.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return t.value}}});return o}return t.openCursor(p(n)).then((function(e){return e&&u(e)}))}});return y}})}var Ar={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Kr};function Sr(e,n,t,r){return t=t||{},r=r||"",a(e).forEach((function(i){if(f(n,i)){var o=e[i],a=n[i];if("object"==typeof o&&"object"==typeof a&&o&&a){var u=N(o);u!==N(a)?t[r+i]=n[i]:"Object"===u?Sr(o,a,t,r+i+"."):o!==a&&(t[r+i]=n[i])}else o!==a&&(t[r+i]=n[i])}else t[r+i]=void 0})),a(n).forEach((function(i){f(e,i)||(t[r+i]=n[i])})),t}function Dr(e,n){return"delete"===n.type?n.keys:n.keys||n.values.map(e.extractKey)}var jr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(n){var t=e.table(n),o=t.schema.primaryKey,a=r(r({},t),{mutate:function(e){var a=Ce.trans,u=a.table(n).hook,s=u.deleting,c=u.creating,l=u.updating;switch(e.type){case"add":if(c.fire===ie)break;return a._promise("readwrite",(function(){return h(e)}),!0);case"put":if(c.fire===ie&&l.fire===ie)break;return a._promise("readwrite",(function(){return h(e)}),!0);case"delete":if(s.fire===ie)break;return a._promise("readwrite",(function(){return h(e)}),!0);case"deleteRange":if(s.fire===ie)break;return a._promise("readwrite",(function(){return d(e)}),!0)}return t.mutate(e);function h(e){var n=Ce.trans,a=e.keys||Dr(o,e);if(!a)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?r(r({},e),{keys:a}):r({},e)).type&&(e.values=i([],e.values)),e.keys&&(e.keys=i([],e.keys)),Cr(t,e,a).then((function(r){var i=a.map((function(t,i){var a=r[i],u={onerror:null,onsuccess:null};if("delete"===e.type)s.fire.call(u,t,a,n);else if("add"===e.type||void 0===a){var h=c.fire.call(u,t,e.values[i],n);null==t&&null!=h&&(t=h,e.keys[i]=t,o.outbound||P(e.values[i],o.keyPath,t))}else{var d=Sr(a,e.values[i]),p=l.fire.call(u,d,t,a,n);if(p){var y=e.values[i];Object.keys(p).forEach((function(e){f(y,e)?y[e]=p[e]:P(y,e,p[e])}))}}return u}));return t.mutate(e).then((function(n){for(var t=n.failures,o=n.results,u=n.numFailures,s=n.lastResult,c=0;c<a.length;++c){var l=o?o[c]:a[c],f=i[c];null==l?f.onerror&&f.onerror(t[c]):f.onsuccess&&f.onsuccess("put"===e.type&&r[c]?e.values[c]:l)}return{failures:t,results:o,numFailures:u,lastResult:s}})).catch((function(e){return i.forEach((function(n){return n.onerror&&n.onerror(e)})),Promise.reject(e)}))}))}function d(e){return p(e.trans,e.range,1e4)}function p(e,n,i){return t.query({trans:e,values:!1,query:{index:o,range:n},limit:i}).then((function(t){var o=t.result;return h({type:"delete",keys:o,trans:e}).then((function(t){return t.numFailures>0?Promise.reject(t.failures[0]):o.length<i?{failures:[],numFailures:0,lastResult:void 0}:p(e,r(r({},n),{lower:o[o.length-1],lowerOpen:!0}),i)}))}))}}});return a}})}};function Cr(e,n,t){return"add"===n.type?Promise.resolve([]):e.getMany({trans:n.trans,keys:t,cache:"immutable"})}function Tr(e,n,t){try{if(!n)return null;if(n.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<n.keys.length&&o<e.length;++i)0===Cn(n.keys[i],e[o])&&(r.push(t?B(n.values[i]):n.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}var qr={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var t=e.table(n);return r(r({},t),{getMany:function(e){if(!e.cache)return t.getMany(e);var n=Tr(e.keys,e.trans._cache,"clone"===e.cache);return n?Ie.resolve(n):t.getMany(e).then((function(n){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?B(n):n},n}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),t.mutate(e)}})}}}};function Br(e,n){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!n.schema.primaryKey.outbound}function Ir(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Rr={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,t=new ur(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(n,t,r){if(Ce.subscr&&"readonly"!==t)throw new ee.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ce.querier));return e.transaction(n,t,r)},table:function(i){var o=e.table(i),s=o.schema,c=s.primaryKey,l=s.indexes,f=c.extractKey,h=c.outbound,d=c.autoIncrement&&l.filter((function(e){return e.compound&&e.keyPath.includes(c.keyPath)})),p=r(r({},o),{mutate:function(e){var r=e.trans,a=e.mutatedParts||(e.mutatedParts={}),l=function(e){var t="idb://".concat(n,"/").concat(i,"/").concat(e);return a[t]||(a[t]=new ur)},f=l(""),h=l(":dels"),p=e.type,y="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[Dr(c,e).filter((function(e){return e})),e.values]:[],v=y[0],m=y[1],b=e.trans._cache;if(u(v)){f.addKeys(v);var g="delete"===p||v.length===m.length?Tr(v,b):null;g||h.addKeys(v),(g||m)&&Nr(l,s,g,m)}else if(v){var w={from:v.lower,to:v.upper};h.add(w),f.add(w)}else f.add(t),h.add(t),s.indexes.forEach((function(e){return l(e.name).add(t)}));return o.mutate(e).then((function(n){return!v||"add"!==e.type&&"put"!==e.type||(f.addKeys(n.results),d&&d.forEach((function(t){var r=e.values.map((function(e){return t.extractKey(e)})),i=t.keyPath.findIndex((function(e){return e===c.keyPath}));n.results.forEach((function(e){return r[i]=e})),l(t.name).addKeys(r)}))),r.mutatedParts=pr(r.mutatedParts||{},a),n}))}}),y=function(n){var t,r,i=n.query,o=i.index,a=i.range;return[o,new ur(null!==(t=a.lower)&&void 0!==t?t:e.MIN_KEY,null!==(r=a.upper)&&void 0!==r?r:e.MAX_KEY)]},v={get:function(e){return[c,new ur(e.key)]},getMany:function(e){return[c,(new ur).addKeys(e.keys)]},count:y,query:y,openCursor:y};return a(v).forEach((function(e){p[e]=function(a){var u=Ce.subscr,s=!!u,c=Br(Ce,o)&&Ir(e,a)?a.obsSet={}:u;if(s){var l=function(e){var t="idb://".concat(n,"/").concat(i,"/").concat(e);return c[t]||(c[t]=new ur)},d=l(""),p=l(":dels"),y=v[e](a),m=y[0],b=y[1];if("query"===e&&m.isPrimaryKey&&!a.values?p.add(b):l(m.name||"").add(b),!m.isPrimaryKey){if("count"!==e){var g="query"===e&&h&&a.values&&o.query(r(r({},a),{values:!1}));return o[e].apply(this,arguments).then((function(n){if("query"===e){if(h&&a.values)return g.then((function(e){var t=e.result;return d.addKeys(t),n}));var t=a.values?n.result.map(f):n.result;a.values?d.addKeys(t):p.addKeys(t)}else if("openCursor"===e){var r=n,i=a.values;return r&&Object.create(r,{key:{get:function(){return p.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return p.addKey(e),e}},value:{get:function(){return i&&d.addKey(r.primaryKey),r.value}}})}return n}))}p.add(t)}}return o[e].apply(this,arguments)}})),p}})}};function Nr(e,n,t,r){function i(n){var i=e(n.name||"");function o(e){return null!=e?n.extractKey(e):null}var a=function(e){return n.multiEntry&&u(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(t||r).forEach((function(e,n){var i=t&&o(t[n]),u=r&&o(r[n]);0!==Cn(i,u)&&(null!=i&&a(i),null!=u&&a(u))}))}n.indexes.forEach(i)}function Mr(e,n,t){if(0===t.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;if(t.numFailures===i)return null;var o=r({},n);return u(o.keys)&&(o.keys=o.keys.filter((function(e,n){return!(n in t.failures)}))),"values"in o&&u(o.values)&&(o.values=o.values.filter((function(e,n){return!(n in t.failures)}))),o}function Fr(e,n){return void 0===n.lower||(n.lowerOpen?Cn(e,n.lower)>0:Cn(e,n.lower)>=0)}function Lr(e,n){return void 0===n.upper||(n.upperOpen?Cn(e,n.upper)<0:Cn(e,n.upper)<=0)}function $r(e,n){return Fr(e,n)&&Lr(e,n)}function zr(e,n,t,r,i,o){if(!t||0===t.length)return e;var a=n.query.index,s=a.multiEntry,c=n.query.range,l=r.schema.primaryKey.extractKey,f=a.extractKey,h=(a.lowLevelIndex||a).extractKey,d=t.reduce((function(e,t){var r=e,i=[];if("add"===t.type||"put"===t.type)for(var o=new ur,a=t.values.length-1;a>=0;--a){var h=t.values[a],d=l(h);if(!o.hasKey(d)){var p=f(h);(s&&u(p)?p.some((function(e){return $r(e,c)})):$r(p,c))&&(o.addKey(d),i.push(h))}}switch(t.type){case"add":r=e.concat(n.values?i:i.map((function(e){return l(e)})));break;case"put":var y=(new ur).addKeys(t.values.map((function(e){return l(e)})));r=e.filter((function(e){return!y.hasKey(n.values?l(e):e)})).concat(n.values?i:i.map((function(e){return l(e)})));break;case"delete":var v=(new ur).addKeys(t.keys);r=e.filter((function(e){return!v.hasKey(n.values?l(e):e)}));break;case"deleteRange":var m=t.range;r=e.filter((function(e){return!$r(l(e),m)}))}return r}),e);return d===e?e:(d.sort((function(e,n){return Cn(h(e),h(n))||Cn(l(e),l(n))})),n.limit&&n.limit<1/0&&(d.length>n.limit?d.length=n.limit:e.length===n.limit&&d.length<n.limit&&(i.dirty=!0)),o?Object.freeze(d):d)}function Ur(e,n){return 0===Cn(e.lower,n.lower)&&0===Cn(e.upper,n.upper)&&!!e.lowerOpen==!!n.lowerOpen&&!!e.upperOpen==!!n.upperOpen}function Vr(e,n,t,r){if(void 0===e)return void 0!==n?-1:0;if(void 0===n)return 1;var i=Cn(e,n);if(0===i){if(t&&r)return 0;if(t)return 1;if(r)return-1}return i}function Yr(e,n,t,r){if(void 0===e)return void 0!==n?1:0;if(void 0===n)return-1;var i=Cn(e,n);if(0===i){if(t&&r)return 0;if(t)return-1;if(r)return 1}return i}function Wr(e,n){return Vr(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&Yr(e.upper,n.upper,e.upperOpen,n.upperOpen)>=0}function Hr(e,n,t,r){var i=vr["idb://".concat(e,"/").concat(n)];if(!i)return[];var o=i.queries[t];if(!o)return[null,!1,i,null];var a=o[(r.query?r.query.index.name:null)||""];if(!a)return[null,!1,i,null];switch(t){case"query":var u=a.find((function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Ur(e.req.query.range,r.query.range)}));return u?[u,!0,i,a]:[a.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Wr(e.req.query.range,r.query.range)})),!1,i,a];case"count":var s=a.find((function(e){return Ur(e.req.query.range,r.query.range)}));return[s,!!s,i,a]}}function Xr(e,n,t,r){e.subscribers.add(t),r.addEventListener("abort",(function(){e.subscribers.delete(t),0===e.subscribers.size&&Qr(e,n)}))}function Qr(e,n){setTimeout((function(){0===e.subscribers.size&&L(n,e)}),3e3)}var Gr={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name,t=r(r({},e),{transaction:function(t,r,i){var o=e.transaction(t,r,i);if("readwrite"===r){var a=new AbortController,u=a.signal,s=function(i){return function(){if(a.abort(),"readwrite"===r){for(var u=new Set,s=0,c=t;s<c.length;s++){var l=c[s],f=vr["idb://".concat(n,"/").concat(l)];if(f){var h=e.table(l),d=f.optimisticOps.filter((function(e){return e.trans===o}));if(o._explicit&&i&&o.mutatedParts)for(var p=0,y=Object.values(f.queries.query);p<y.length;p++)for(var v=0,m=(w=y[p]).slice();v<m.length;v++)yr((k=m[v]).obsSet,o.mutatedParts)&&(L(w,k),k.subscribers.forEach((function(e){return u.add(e)})));else if(d.length>0){f.optimisticOps=f.optimisticOps.filter((function(e){return e.trans!==o}));for(var b=0,g=Object.values(f.queries.query);b<g.length;b++)for(var w,_=0,x=(w=g[b]).slice();_<x.length;_++){var k;if(null!=(k=x[_]).res&&o.mutatedParts)if(i&&!k.dirty){var O=Object.isFrozen(k.res),P=zr(k.res,k.req,d,h,k,O);k.dirty?(L(w,k),k.subscribers.forEach((function(e){return u.add(e)}))):P!==k.res&&(k.res=P,k.promise=Ie.resolve({result:P}))}else k.dirty&&L(w,k),k.subscribers.forEach((function(e){return u.add(e)}))}}}}u.forEach((function(e){return e()}))}}};o.addEventListener("abort",s(!1),{signal:u}),o.addEventListener("error",s(!1),{signal:u}),o.addEventListener("complete",s(!0),{signal:u})}return o},table:function(t){var i=e.table(t),o=i.schema.primaryKey,a=r(r({},i),{mutate:function(e){var a=Ce.trans;if(o.outbound||"disabled"===a.db._options.cache||a.explicit)return i.mutate(e);var u=vr["idb://".concat(n,"/").concat(t)];if(!u)return i.mutate(e);var s=i.mutate(e);return"add"!==e.type&&"put"!==e.type||!(e.values.length>=50||Dr(o,e).some((function(e){return null==e})))?(u.optimisticOps.push(e),e.mutatedParts&&gr(e.mutatedParts),s.then((function(n){if(n.numFailures>0){L(u.optimisticOps,e);var t=Mr(u,e,n);t&&u.optimisticOps.push(t),e.mutatedParts&&gr(e.mutatedParts)}})),s.catch((function(){L(u.optimisticOps,e),e.mutatedParts&&gr(e.mutatedParts)}))):s.then((function(n){var t=r(r({},e),{values:e.values.map((function(e,t){var i,a=(null===(i=o.keyPath)||void 0===i?void 0:i.includes("."))?B(e):r({},e);return P(a,o.keyPath,n.results[t]),a}))}),i=Mr(u,t,n);u.optimisticOps.push(i),queueMicrotask((function(){return e.mutatedParts&&gr(e.mutatedParts)}))})),s},query:function(e){var r;if(!Br(Ce,i)||!Ir("query",e))return i.query(e);var o="immutable"===(null===(r=Ce.trans)||void 0===r?void 0:r.db._options.cache),a=Ce,u=a.requery,s=a.signal,c=Hr(n,t,"query",e),l=c[0],f=c[1],h=c[2],d=c[3];if(l&&f)l.obsSet=e.obsSet;else{var p=i.query(e).then((function(e){var n=e.result;if(l&&(l.res=n),o){for(var t=0,r=n.length;t<r;++t)Object.freeze(n[t]);Object.freeze(n)}else e.result=B(n);return e})).catch((function(e){return d&&l&&L(d,l),Promise.reject(e)}));l={obsSet:e.obsSet,promise:p,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(l):(d=[l],h||(h=vr["idb://".concat(n,"/").concat(t)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),h.queries.query[e.query.index.name||""]=d)}return Xr(l,d,u,s),l.promise.then((function(n){return{result:zr(n.result,e,null==h?void 0:h.optimisticOps,i,l,o)}}))}});return a}});return t}};function Jr(e,n){return new Proxy(e,{get:function(e,t,r){return"db"===t?n:Reflect.get(e,t,r)}})}var Zr,ei=function(){function e(n,t){var i=this;this._middlewares={},this.verno=0;var o=e.dependencies;this._options=t=r({addons:e.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};var a=t.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ie,dbReadyPromise:null,cancelOpen:ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};u.dbReadyPromise=new Ie((function(e){u.dbReadyResolve=e})),u.openCanceller=new Ie((function(e,n){u.cancelOpen=n})),this._state=u,this.name=n,this.on=Nn(this,"populate","blocked","versionchange","close",{ready:[he,ie]}),this.on.ready.subscribe=w(this.on.ready.subscribe,(function(n){return function(t,r){e.vip((function(){var e=i._state;if(e.openComplete)e.dbOpenError||Ie.resolve().then(t),r&&n(t);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(t),r&&n(t);else{n(t);var o=i;r||n((function e(){o.on.ready.unsubscribe(t),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=Zn(this),this.Table=Fn(this),this.Transaction=bt(this),this.Version=Jt(this),this.WhereClause=ft(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=kt(t.IDBKeyRange),this._createTransaction=function(e,n,t,r){return new i.Transaction(e,n,t,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),On.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(n){return n.on("versionchange").fire(e)}))},this.use(qr),this.use(Gr),this.use(Rr),this.use(Ar),this.use(jr);var s=new Proxy(this,{get:function(e,n,t){if("_vip"===n)return!0;if("table"===n)return function(e){return Jr(i.table(e),s)};var r=Reflect.get(e,n,t);return r instanceof Rn?Jr(r,s):"tables"===n?r.map((function(e){return Jr(e,s)})):"_createTransaction"===n?function(){return Jr(r.apply(this,arguments),s)}:r}});this.vip=s,a.forEach((function(e){return e(i)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,t=n.filter((function(n){return n._cfg.version===e}))[0];return t||(t=new this.Version(e),n.push(t),n.sort(Bt),t.stores({}),this._state.autoSchema=!1,t)},e.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||Ce.letThrough||this._vip)?e():new Ie((function(e,t){if(n._state.openComplete)return t(new ee.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void t(new ee.DatabaseClosed);n.open().catch(ie)}n._state.dbReadyPromise.then(e,t)})).then(e)},e.prototype.use=function(e){var n=e.stack,t=e.create,r=e.level,i=e.name;i&&this.unuse({stack:n,name:i});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:t,level:null==r?10:r,name:i}),o.sort((function(e,n){return e.level-n.level})),this},e.prototype.unuse=function(e){var n=e.stack,t=e.name,r=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter((function(e){return r?e.create!==r:!!t&&e.name!==t}))),this},e.prototype.open=function(){var e=this;return pn(je,(function(){return xr(e)}))},e.prototype._close=function(){var e=this._state,n=On.indexOf(this);if(n>=0&&On.splice(n,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Ie((function(n){e.dbReadyResolve=n})),e.openCanceller=new Ie((function(n,t){e.cancelOpen=t})))},e.prototype.close=function(e){var n=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen,t=this._state;n?(t.isBeingOpened&&t.cancelOpen(new ee.DatabaseClosed),this._close(),t.autoOpen=!1,t.dbOpenError=new ee.DatabaseClosed):(this._close(),t.autoOpen=this._options.autoOpen||t.isBeingOpened,t.openComplete=!1,t.dbOpenError=null)},e.prototype.delete=function(e){var n=this;void 0===e&&(e={disableAutoOpen:!0});var t=arguments.length>0&&"object"!=typeof arguments[0],r=this._state;return new Ie((function(i,o){var a=function(){n.close(e);var t=n._deps.indexedDB.deleteDatabase(n.name);t.onsuccess=Je((function(){rr(n._deps,n.name),i()})),t.onerror=ht(o),t.onblocked=n._fireOnBlocked};if(t)throw new ee.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map((function(n){return e._allTables[n]}))},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Or.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,n,t){var r=this,i=Ce.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=n.map((function(e){var n=e instanceof r.Table?e.name:e;if("string"!=typeof n)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return n})),"r"==e||e===En)o=En;else{if("rw"!=e&&e!=Kn)throw new ee.InvalidArgument("Invalid transaction mode: "+e);o=Kn}if(i){if(i.mode===En&&o===Kn){if(!u)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!u)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),u&&i&&!i.active&&(i=null)}}catch(e){return i?i._promise(null,(function(n,t){t(e)})):mn(e)}var s=Pr.bind(null,this,o,a,i,t);return i?i._promise(o,s,"lock"):Ce.trans?pn(Ce.transless,(function(){return r._whenReady(s)})):this._whenReady(s)},e.prototype.table=function(e){if(!f(this._allTables,e))throw new ee.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},e}(),ni="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",ti=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,n,t){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:n,complete:t})},e.prototype[ni]=function(){return this},e}();try{Zr={indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(e){Zr={indexedDB:null,IDBKeyRange:null}}function ri(e){var n,t=!1,r=new ti((function(r){var i=U(e);function o(n){var t=Ve();try{i&&un();var r=an(e,n);return i&&(r=r.finally(sn)),r}finally{t&&Ye()}}var a,u=!1,s={},c={},l={get closed(){return u},unsubscribe:function(){u||(u=!0,a&&a.abort(),f&&vt.storagemutated.unsubscribe(p))}};r.start&&r.start(l);var f=!1,h=function(){return vn(y)};function d(){return yr(c,s)}var p=function(e){pr(s,e),d()&&h()},y=function(){if(!u&&Zr.indexedDB){s={};var i={};a&&a.abort(),a=new AbortController;var l={subscr:i,signal:a.signal,requery:h,querier:e,trans:null},d=o(l);Promise.resolve(d).then((function(e){t=!0,n=e,u||l.signal.aborted||(s={},T(c=i)||f||(vt(pt,p),f=!0),vn((function(){return!u&&r.next&&r.next(e)})))}),(function(e){t=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||u||vn((function(){u||r.error&&r.error(e)}))}))}};return setTimeout(h,0),l}));return r.hasValue=function(){return t},r.getValue=function(){return n},r}var ii=ei;function oi(e){var n=ui;try{ui=!0,vt.storagemutated.fire(e),wr(e,!0)}finally{ui=n}}h(ii,r(r({},re),{delete:function(e){return new ii(e,{addons:[]}).delete()},exists:function(e){return new ii(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return nr(ii.dependencies).then(e)}catch(e){return mn(new ee.MissingAPI)}},defineClass:function(){function e(e){s(this,e)}return e},ignoreTransaction:function(e){return Ce.trans?pn(Ce.transless,e):e()},vip:ir,async:function(e){return function(){try{var n=kr(e.apply(this,arguments));return n&&"function"==typeof n.then?n:Ie.resolve(n)}catch(e){return mn(e)}}},spawn:function(e,n,t){try{var r=kr(e.apply(t,n||[]));return r&&"function"==typeof r.then?r:Ie.resolve(r)}catch(e){return mn(e)}},currentTransaction:{get:function(){return Ce.trans||null}},waitFor:function(e,n){var t=Ie.resolve("function"==typeof e?ii.ignoreTransaction(e):e).timeout(n||6e4);return Ce.trans?Ce.trans.waitFor(t):t},Promise:Ie,debug:{get:function(){return de},set:function(e){pe(e)}},derive:y,extend:s,props:h,override:w,Events:Nn,on:vt,liveQuery:ri,extendObservabilitySet:pr,getByKeyPath:O,setByKeyPath:P,delByKeyPath:E,shallowClone:K,deepClone:B,getObjectDiff:Sr,cmp:Cn,asap:x,minKey:_n,addons:[],connections:On,errnames:J,dependencies:Zr,cache:vr,semVer:gn,version:gn.split(".").map((function(e){return parseInt(e)})).reduce((function(e,n,t){return e+n/Math.pow(10,2*t)}))})),ii.maxKey=kt(ii.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(vt(pt,(function(e){var n;ui||(n=new CustomEvent(yt,{detail:e}),ui=!0,dispatchEvent(n),ui=!1)})),addEventListener(yt,(function(e){var n=e.detail;ui||oi(n)})));var ai,ui=!1,si=function(){};function ci(e){return new Qn({add:e})}function li(e){return new Qn({remove:e})}function fi(e,n){return new Qn({replacePrefix:[e,n]})}return"undefined"!=typeof BroadcastChannel&&((si=function(){(ai=new BroadcastChannel(yt)).onmessage=function(e){return e.data&&oi(e.data)}})(),"function"==typeof ai.unref&&ai.unref(),vt(pt,(function(e){ui||ai.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!ei.disableBfCache&&e.persisted){de&&console.debug("Dexie: handling persisted pagehide"),null==ai||ai.close();for(var n=0,t=On;n<t.length;n++)t[n].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(e){!ei.disableBfCache&&e.persisted&&(de&&console.debug("Dexie: handling persisted pageshow"),si(),oi({all:new ur(-1/0,[[]])}))}))),Ie.rejectionMapper=te,pe(de),r(ei,Object.freeze({__proto__:null,Dexie:ei,liveQuery:ri,Entity:jn,cmp:Cn,PropModSymbol:Xn,PropModification:Qn,replacePrefix:fi,add:ci,remove:li,default:ei,RangeSet:ur,mergeRanges:cr,rangesOverlap:lr}),{default:ei}),ei}();var i=t(r.exports);const o=Symbol.for("Dexie"),a=globalThis[o]||(globalThis[o]=i);if(i.semVer!==a.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${i.semVer} and ${a.semVer}`);let u={};const s=new a("docsify");async function c(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const n=await s.expires.get(e);return n?n.value:0}const n=await s.search.where({indexKey:e}).toArray();return n||null}s.version(1).stores({search:"slug, title, body, path, indexKey",expires:"key, value"});const l={EXPIRE_KEY:"docsify.search.expires",INDEX_KEY:"docsify.search.index"};function f(e){const n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"']/g,(e=>n[e]))}function h(e){return e.text||"table"!==e.type||(e.rows.unshift(e.header),e.text=e.rows.map((e=>e.map((e=>e.text)).join(" | "))).join(" |\n ")),e.text}function d(e){return e.text||"list"!==e.type||(e.text=e.raw),e.text}function p(e){return e&&e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}async function y(n,t){const r="auto"===n.paths,i=r?function(e){const n=[];return Docsify.dom.findAll(".sidebar-nav a:not(.section-link):not([data-nosearch])").forEach((t=>{const r=t.href,i=t.getAttribute("href"),o=e.parse(r).path;o&&-1===n.indexOf(o)&&!Docsify.util.isAbsolutePath(i)&&n.push(o)})),n}(t.router):n.paths;let o="";if(i.length&&r&&n.pathNamespaces){const e=i[0];if(Array.isArray(n.pathNamespaces))o=n.pathNamespaces.filter((n=>e.slice(0,n.length)===n))[0]||o;else if(n.pathNamespaces instanceof RegExp){const t=e.match(n.pathNamespaces);t&&(o=t[0])}const t=-1===i.indexOf(o+"/"),r=-1===i.indexOf(o+"/README");t&&r&&i.unshift(o+"/")}else-1===i.indexOf("/")&&-1===i.indexOf("/README")&&i.unshift("/");const a=((p=n.namespace)?`${l.EXPIRE_KEY}/${p}`:l.EXPIRE_KEY)+o;var p;const y=function(e){return e?`${l.INDEX_KEY}/${e}`:l.INDEX_KEY}(n.namespace)+o,v=await c(a,!0)<Date.now();if(u=await c(y),v)u={};else if(!r)return;const m=i.length;let b=0;i.forEach((r=>{if(!!Array.isArray(u)&&u.some((e=>e.path===r)))return b++;Docsify.get(t.router.getFile(r),!1,t.config.requestHeaders).then((async i=>{u[r]=function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const a=window.marked.lexer(t),u=window.Docsify.slugify,s={};let c,l="";return a.forEach(((t,a)=>{if("heading"===t.type&&t.depth<=i){const{str:i,config:a}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const n={};return e&&(e=e.replace(/^('|")/,"").replace(/('|")$/,"").replace(/(?:^|\s):([\w-]+:?)=?([\w-%]+)?/g,((e,t,r)=>-1===t.indexOf(":")?(n[t]=r&&r.replace(/&quot;/g,"")||!0,""):e)).trim()),{str:e,config:n}}(t.text),h=e(t.text).content;c=a.id?r.toURL(n,{id:u(a.id)}):r.toURL(n,{id:u(f(h))}),i&&(l=e(i).content),s[c]={slug:c,title:l,body:"",path:n,indexKey:o}}else{if(0===a&&(c=r.toURL(n),s[c]={slug:c,title:"/"!==n?n.slice(1):"Home Page",body:t.text||"",path:n,indexKey:o}),!c)return;s[c]?s[c].body?(t.text=h(t),t.text=d(t),s[c].body+="\n"+(t.text||"")):(t.text=h(t),t.text=d(t),s[c].body=t.text||""):s[c]={slug:c,title:"",body:""},s[c].path=n,s[c].indexKey=o}})),u.clear(),s}(r,i,t.router,n.depth,y),m===++b&&await async function(e,n){u=Object.values(u).flatMap((e=>Object.values(e))),await s.search.bulkPut(u),await s.expires.put({key:n,value:Date.now()+e})}(n.maxAge,a)}))}))}let v="";function m(e){const n=Docsify.dom.find(".search"),t=Docsify.dom.find(n,".results-panel"),r=Docsify.dom.find(".search .results-status");if(!e)return t.innerHTML="",void(r.textContent="");const i=function(e){const n=[];let t=(e=e.trim()).split(/[\s\-，\\/]+/);1!==t.length&&(t=[e,...t]);for(const e of u){let r=0,i="",o="",a="";const u=e.title&&e.title.trim(),s=e.body&&e.body.trim(),c=e.slug||"";if(u&&(t.forEach((e=>{const n=new RegExp(f(p(e)).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),"gi");let t=-1,c=-1;if(o=u?f(p(u)):u,a=s?f(p(s)):s,t=u?o.search(n):-1,c=s?a.search(n):-1,t>=0||c>=0){r+=t>=0?3:c>=0?2:0,c<0&&(c=0);let o=0,u=0;o=c<11?0:c-10,u=0===o?100:c+e.length+90,s&&u>s.length&&(u=s.length);const l=a&&a.substring(o,u).replace(n,(e=>`<mark>${e}</mark>`));i+=l}})),r>0)){const e={title:o,content:s?i:"",url:c,score:r};n.push(e)}}return n.sort(((e,n)=>n.score-e.score))}(e);let o="";i.forEach(((e,n)=>{const t=(e.title||"").replace(/<[^>]+>/g,"");o+=`\n      <div class="matching-post" aria-label="search result ${n+1}">\n        <a href="${e.url}" title="${t}">\n          <p class="title clamp-1">${e.title}</p>\n          <p class="content clamp-2">${e.content}</p>\n        </a>\n      </div>\n    `})),t.innerHTML=o||"",r.textContent=i.length?`Found ${i.length} results`:v}function b(e,n){if(!Docsify.dom.find(".sidebar"))return;const t=n.router.parse().query.s;Docsify.dom.style("/* prettier-ignore */\n:root {\n  --plugin-search-input-bg           : var(--form-element-bg);\n  --plugin-search-input-border-color : var(--sidebar-border-color);\n  --plugin-search-input-border-radius: var(--form-element-border-radius);\n  --plugin-search-input-color        : var(--form-element-color);\n  --plugin-search-kbd-bg             : var(--color-bg);\n  --plugin-search-kbd-border         : 1px solid var(--color-mono-3);\n  --plugin-search-kbd-border-radius  : 4px;\n  --plugin-search-kbd-color          : var(--color-mono-5);\n  --plugin-search-margin             : 10px;\n  --plugin-search-reset-bg           : var(--theme-color);\n  --plugin-search-reset-border       : transparent;\n  --plugin-search-reset-border-radius: var(--border-radius);\n  --plugin-search-reset-color        : #fff;\n}\n\n.search {\n  margin: var(--plugin-search-margin);\n}\n\n/* Input */\n/* ================================== */\n.search .input-wrap {\n  position: relative;\n}\n\n.search input {\n  width: 100%;\n  padding-inline-end: 36px;\n  border: 1px solid var(--plugin-search-input-border-color);\n  border-radius: var(--plugin-search-input-border-radius);\n  background: var(--plugin-search-input-bg);\n  color: var(--plugin-search-input-color);\n}\n\n.search input::-webkit-search-decoration,\n.search input::-webkit-search-cancel-button {\n  appearance: none;\n}\n\n.search .clear-button,\n.search .kbd-group {\n  visibility: hidden;\n  display: flex;\n  gap: 0.15em;\n  position: absolute;\n  right: 7px;\n  top: 50%;\n  opacity: 0;\n  translate: 0 -50%;\n  transition-property: opacity, visibility;\n  transition-duration: var(--duration-medium);\n}\n\n/* Note: invalid = empty, valid = not empty */\n.search input:valid ~ .clear-button,\n.search input:invalid:where(:focus, :hover) ~ .kbd-group,\n.search .kbd-group:hover {\n  visibility: visible;\n  opacity: 1;\n}\n\n.search .clear-button {\n  --_button-size: 20px;\n  --_content-size: 12px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: var(--_button-size);\n  width: var(--_button-size);\n  border: var(--plugin-search-reset-border);\n  border-radius: var(--plugin-search-reset-border-radius);\n  background: var(--plugin-search-reset-bg);\n  cursor: pointer;\n}\n\n.search .clear-button::before,\n.search .clear-button::after {\n  content: '';\n  position: absolute;\n  height: 2px;\n  width: var(--_content-size);\n  color: var(--plugin-search-reset-color);\n  background: var(--plugin-search-reset-color);\n}\n\n.search .clear-button::before {\n  rotate: 45deg;\n}\n\n.search .clear-button::after {\n  rotate: -45deg;\n}\n\n.search kbd {\n  border: var(--plugin-search-kbd-border);\n  border-radius: var(--plugin-search-kbd-border-radius);\n  background: var(--plugin-search-kbd-bg);\n  color: var(--plugin-search-kbd-color);\n  font-size: var(--font-size-s);\n}\n\n/* Results */\n/* ================================== */\n.search a:hover {\n  color: var(--theme-color);\n}\n\n.search .results-panel:empty {\n  display: none;\n}\n\n/* Hide other sidebar items when results are shown */\n.search:has(.results-panel:not(:empty)) ~ * {\n  display: none;\n}\n\n/* Dim other sidebar items when no results are found */\n.search:where(:has(input:valid:focus), :has(.results-panel::empty)) ~ * {\n  opacity: 0.2;\n}\n\n.search .matching-post {\n  overflow: hidden;\n  padding: 1em 0 1.2em 0;\n  border-bottom: 1px solid var(--color-mono-2);\n}\n\n.search .matching-post:hover a {\n  text-decoration-color: transparent;\n}\n\n.search .matching-post:hover .title {\n  text-decoration: inherit;\n  text-decoration-color: var(--link-underline-color-hover);\n}\n\n.search .matching-post .title {\n  margin: 0 0 0.5em 0;\n  line-height: 1.4;\n}\n\n.search .matching-post .content {\n  margin: 0;\n  color: var(--color-mono-6);\n  font-size: var(--font-size-s);\n}\n\n.search .results-status {\n  margin-bottom: 0;\n  color: var(--color-mono-6);\n  font-size: var(--font-size-s);\n}\n\n.search .results-status:empty {\n  display: none;\n}\n"),function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{insertAfter:t,insertBefore:r}=e.config?.search||{},i=`\n    <div class="input-wrap">\n      <input type="search" value="${n}" required aria-keyshortcuts="/ control+k meta+k" />\n      <button class="clear-button" title="Clear search">\n        <span class="visually-hidden">Clear search</span>\n      </button>\n      <div class="kbd-group">\n        <kbd title="Press / to search">/</kbd>\n        <kbd title="Press Control+K to search">⌃K</kbd>\n      </div>\n    </div>\n    <p class="results-status" aria-live="polite"></p>\n    <div class="results-panel"></div>\n  `,o=Docsify.dom.find(".sidebar"),a=Docsify.dom.create("section",i),u=o.querySelector(`:scope ${t||r||"> :first-child"}`);a.classList.add("search"),a.setAttribute("role","search"),o.insertBefore(a,t?u.nextSibling:u)}(n,t),function(){const e=Docsify.dom.find(".search"),n=Docsify.dom.find(e,"input"),t=Docsify.dom.find(e,".clear-button");let r;Docsify.dom.on(e,"click",(e=>-1===["A","H2","P","EM"].indexOf(e.target.tagName)&&e.stopPropagation())),Docsify.dom.on(n,"input",(e=>{clearTimeout(r),r=setTimeout((n=>m(e.target.value.trim())),100)})),Docsify.dom.on(t,"click",(e=>{n.value="",m()}))}(),t&&setTimeout((e=>m(t)),500)}function g(e,n){!function(e,n){const t=Docsify.dom.getNode('.search input[type="search"]');if(t)if("string"==typeof e)t.placeholder=e;else{const r=Object.keys(e).filter((e=>n.indexOf(e)>-1))[0];t.placeholder=e[r]}}(e.placeholder,n.route.path),function(e,n){if("string"==typeof e)v=e;else{const t=Object.keys(e).filter((e=>n.indexOf(e)>-1))[0];v=e[t]}}(e.noData,n.route.path)}const w={placeholder:"Type to search",noData:"No Results!",paths:"auto",depth:2,maxAge:864e5,namespace:void 0,pathNamespaces:void 0,keyBindings:["/","meta+k","ctrl+k"],insertAfter:void 0,insertBefore:void 0};window.$docsify=window.$docsify||{},$docsify.plugins=[function(e,n){const{util:t}=Docsify,r=n.config.search||w;Array.isArray(r)?w.paths=r:"object"==typeof r&&(w.paths=Array.isArray(r.paths)?r.paths:"auto",w.maxAge=t.isPrimitive(r.maxAge)?r.maxAge:w.maxAge,w.placeholder=r.placeholder||w.placeholder,w.noData=r.noData||w.noData,w.depth=r.depth||w.depth,w.namespace=r.namespace||w.namespace,w.pathNamespaces=r.pathNamespaces||w.pathNamespaces,w.keyBindings=r.keyBindings||w.keyBindings);const i="auto"===w.paths;e.init((()=>{const{keyBindings:e}=n.config;e.constructor===Object&&(e.focusSearch={bindings:w.keyBindings,callback(e){const n=document.querySelector(".sidebar"),t=document.querySelector(".sidebar-toggle"),r=n?.querySelector('input[type="search"]'),i=n?.getBoundingClientRect().x<0;i&&t?.click(),setTimeout((()=>r?.focus()),i?250:0)}})})),e.mounted((e=>{b(0,n),!i&&y(w,n)})),e.doneEach((e=>{g(w,n),i&&y(w,n)}))},...$docsify.plugins||[]]}();
//# sourceMappingURL=search.min.js.map
